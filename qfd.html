<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="canonical" href="https://sigmaexacta.com/qfd" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive QFD Tool - House of Quality | Sigma Exacta</title>
    <meta name="description"
        content="Free Quality Function Deployment (QFD) matrix / House of Quality tool. Translate customer needs into technical specifications and prioritize engineering efforts. Export to Excel.">
    <meta name="keywords"
        content="Open source, Free Software, SigmaExacta, QFD, Quality Function Deployment, House of Quality, HOQ, customer needs, voice of the customer, technical requirements, product design, engineering, quality tool, free tool">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="sigma-exacta-icon.jpg" type="image/jpeg">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="styles.css">

    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --warning-color: #f39c12;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #27ae60;
            --performance-color: #2ecc71;
            --danger-color: #c0392b;
            --attractive-color: #3498db;
            font-size: 16px;
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Nunito', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            color: #333;
            background-color: #f5f7fa;
            line-height: 1.6;
        }

        /* --- MODIFICACIONES PARA ANCHO RESPONSIVE --- */
        .main-content-wrapper {
            margin: 0 auto;
            padding: 1.25rem;
            max-width: 1400px;
            width: 100%;
            box-sizing: border-box;
        }

        .main-header {
            text-align: center;
            padding: 1rem 1.25rem;
            margin-bottom: 0;
            border-bottom: 1px solid #ddd;
            width: 100%;
            box-sizing: border-box;
        }

        .main-header h1 {
            color: var(--primary-color);
            font-size: clamp(1.5rem, 4vw, 1.8rem);
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .tool-logo {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 1.8rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            background-color: #0076a8;
        }

        .main-header p {
            color: #7f8c8d;
            font-weight: 400;
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto;
        }

        /* --- BOTONES PRINCIPALES SOBRE LAS TABS (EXACTO COMO KANO) --- */
        .main-action-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem auto;
            flex-wrap: wrap;
            max-width: 800px;
        }

        .main-action-buttons button {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
        }

        /* BOTÓN EXAMPLE - VERDE COMO EN KANO */
        .main-action-buttons .btn-example {
            background-color: var(--performance-color) !important;
            /* Verde: #2ecc71 */
            color: white !important;
        }

        .main-action-buttons .btn-example:hover {
            background-color: #27ad60 !important;
            /* Verde más oscuro */
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15);
        }

        /* BOTÓN RESET - ROJO COMO EN KANO */
        .main-action-buttons .btn-reset {
            background-color: var(--danger-color) !important;
            /* Rojo: #c0392b */
            color: white !important;
        }

        .main-action-buttons .btn-reset:hover {
            background-color: #a5281c !important;
            /* Rojo más oscuro */
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15);
        }

        /* ===== ESTILOS DEL SISTEMA DE PESTAÑAS (WIZARD) - EXACTO COMO KANO ===== */
        .tabs-nav {
            display: flex;
            background-color: #f1f5f9;
            border-radius: 8px 8px 0 0;
            overflow-x: auto;
            border-bottom: 2px solid var(--secondary-color);
            margin-bottom: 0;
            margin-top: 0.5rem;
            scrollbar-width: none;
            -ms-overflow-style: none;
            width: 100%;
        }

        .tabs-nav::-webkit-scrollbar {
            display: none;
        }

        /* CORREGIDO: Selector más específico para evitar que el estilo global afecte */
        .tabs-nav .tab-btn {
            padding: 1rem 1.5rem;
            border: none;
            background: none !important;
            /* IMPORTANTE: Anula el fondo azul del estilo global */
            cursor: pointer;
            font-weight: 700;
            color: #64748b !important;
            /* IMPORTANTE: Anula el texto blanco del estilo global */
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            flex: 1;
            justify-content: center;
            margin: 0 !important;
            /* IMPORTANTE: Anula el margin del estilo global */
            border-radius: 0 !important;
            /* IMPORTANTE: Anula el border-radius del estilo global */
        }

        .tabs-nav .tab-btn:hover {
            background-color: #e2e8f0 !important;
            /* IMPORTANTE: Anula el fondo azul del estilo global */
            color: var(--primary-color) !important;
        }

        .tabs-nav .tab-btn.active {
            background-color: #fff !important;
            /* IMPORTANTE: Anula el fondo azul del estilo global */
            color: var(--secondary-color) !important;
            border-bottom-color: var(--secondary-color);
            border-radius: 8px 8px 0 0;
            margin-bottom: -2px;
            border-left: 1px solid #e1e5e9;
            border-right: 1px solid #e1e5e9;
            border-top: 1px solid #e1e5e9;
        }

        .tabs-container {
            background: #fff;
            border: 1px solid #e1e5e9;
            border-top: none;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
            position: relative;
            margin-bottom: 2rem;
            box-sizing: border-box;
        }

        .wizard-tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
            width: 100%;
            box-sizing: border-box;
            max-width: 100%;
        }

        .wizard-tab-content.active {
            display: block;
            width: 100%;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tab-content-wrapper {
            padding: 2rem;
            width: 100%;
            box-sizing: border-box;
            max-width: 100%;
        }

        /* ESTILOS PARA BOTONES NORMALES (no tabs) */
        /* Este estilo SOLO debe aplicarse a botones que NO sean tabs */
        .main-content-wrapper button:not(.tab-btn):not(.input-tab):not(.btn-add):not(.btn-remove):not(.btn-example):not(.btn-reset) {
            background-color: var(--secondary-color);
            color: white;
            padding: 0.7rem 1.25rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 1rem;
            transition: background-color 0.3s;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
        }

        .main-content-wrapper button:not(.tab-btn):not(.input-tab):not(.btn-add):not(.btn-remove):not(.btn-example):not(.btn-reset):hover {
            background-color: #2980b9;
        }

        @media (max-width: 768px) {
            .tab-content-wrapper {
                padding: 1rem;
            }

            .tabs-nav .tab-btn {
                padding: 0.75rem 0.5rem;
                font-size: 0.9rem;
            }

            .main-action-buttons {
                gap: 0.75rem;
                margin: 1rem auto;
            }

            .main-action-buttons button {
                padding: 0.7rem 1.2rem;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .tab-content-wrapper {
                padding: 0.75rem;
            }

            .tabs-nav .tab-btn {
                padding: 0.6rem 0.3rem;
                font-size: 0.8rem;
            }

            .main-action-buttons {
                flex-direction: column;
                align-items: stretch;
                gap: 0.5rem;
            }

            .main-action-buttons button {
                width: 100%;
                justify-content: center;
            }
        }

        /* ESTILOS DE CONTENIDO */
        .content-block {
            margin-bottom: 1.5rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1.5rem;
            background-color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .content-block h2 {
            font-size: 1.5em;
            margin-top: 0;
            margin-bottom: 1.25rem;
            color: var(--primary-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 0.6rem;
            font-weight: 800;
        }

        .content-block h2 .fas {
            margin-right: 0.75rem;
        }

        .tool-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.6rem;
            margin-bottom: 1.5rem;
        }

        .header h1 .fas.fa-chart-bar {
            color: var(--warning-color);
        }

        .infographic-flow {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1.5rem;
            text-align: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .flow-step {
            flex: 1;
            min-width: 150px;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f8f9fa;
            margin: 5px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .flow-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }

        .flow-step .fas {
            font-size: 1.8rem;
            color: var(--primary-color);
            margin-bottom: 0.6rem;
        }

        .flow-step strong {
            display: block;
            font-size: 1.1rem;
            color: var(--primary-color);
            font-weight: 600;
        }

        .flow-arrow {
            font-size: 2rem;
            color: var(--secondary-color);
            margin: 0 0.6rem;
        }

        .key-components-list {
            list-style: none;
            padding-left: 0;
        }

        .key-components-list li {
            margin-bottom: 0.75rem;
            padding-left: 1.5rem;
            position: relative;
        }

        .key-components-list li::before {
            content: '\f058';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            color: var(--success-color);
            position: absolute;
            left: 0;
            top: 2px;
        }

        .instructions-box ul {
            margin: 0.6rem 0 0 0;
            padding-left: 1.25rem;
        }

        label {
            display: block;
            margin-bottom: 0.6rem;
            color: var(--primary-color);
            font-weight: 600;
        }

        input[type="text"],
        select {
            width: 100%;
            padding: 0.6rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            transition: border 0.3s, box-shadow 0.3s;
            font-family: 'Nunito', sans-serif;
        }

        input:focus,
        select:focus,
        button:focus-visible {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.3);
        }

        /* Botones específicos (NO tabs) */
        .btn-add {
            background-color: var(--success-color);
            padding: 0;
            width: 42px;
            height: 42px;
            font-size: 1.2em;
            flex-shrink: 0;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .btn-remove {
            background-color: var(--accent-color);
            padding: 0;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            font-size: 1em;
            flex-shrink: 0;
            color: white;
            border: none;
            cursor: pointer;
        }

        .list-container {
            min-height: 100px;
            border: 1px solid #eee;
            padding: 0.6rem;
            border-radius: 4px;
            margin-bottom: 1rem;
            background-color: #fafafa;
        }

        .list-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.6rem;
            padding: 0.6rem;
            background-color: #f9f9f9;
            border-radius: 4px;
            margin-bottom: 0.5rem;
            border: 1px solid #eee;
        }

        .list-item span {
            flex-grow: 1;
            word-break: break-word;
        }

        .customer-importance-container {
            display: flex;
            align-items: center;
            gap: 8px;
            width: 150px;
            flex-shrink: 0;
        }

        .customer-importance-bar-bg {
            flex-grow: 1;
            background-color: #e0e0e0;
            border-radius: 4px;
            height: 18px;
        }

        .customer-importance-bar {
            height: 100%;
            background-color: var(--success-color);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .add-item-form {
            display: flex;
            gap: 0.6rem;
            align-items: center;
            margin-top: 1rem;
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 4px;
            border: 1px solid #eee;
        }

        .add-item-form .input-group {
            flex-grow: 1;
        }

        .add-item-form .select-group {
            width: 150px;
        }

        .table-responsive-wrapper {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin-top: 1rem;
            border: 1px solid #eee;
            border-radius: 4px;
            padding: 1rem;
            background-color: white;
        }

        #qfdMatrixContainer {
            width: 100%;
            overflow-x: auto;
            padding: 2px;
        }

        .qfd-table {
            border-collapse: collapse;
            font-size: 1rem;
            width: 100%;
        }

        .qfd-table th,
        .qfd-table td {
            border: 1px solid #ccc;
            padding: 0.5rem;
            text-align: center;
            vertical-align: middle;
            white-space: nowrap;
        }

        .qfd-table th {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
        }

        .qfd-table .customer-requirements {
            text-align: left;
            max-width: 200px;
            word-wrap: break-word;
            font-weight: bold;
            background-color: #eaf2f8;
            white-space: normal;
        }

        .qfd-table .importance-cell {
            font-weight: bold;
            background-color: #fef9e7;
        }

        .qfd-table .technical-requirements {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            vertical-align: middle;
            white-space: normal;
            max-width: 150px;
        }

        .relationship-strong,
        .correlation-positive-strong {
            background-color: var(--success-color);
            color: var(--dark-color);
            font-weight: bold;
        }

        .relationship-medium,
        .correlation-positive-weak {
            background-color: var(--warning-color);
            color: var(--dark-color);
            font-weight: bold;
        }

        .relationship-weak,
        .correlation-negative-weak {
            background-color: var(--accent-color);
            color: white;
            font-weight: bold;
        }

        .correlation-negative-strong {
            background-color: #7d3c98;
            color: white;
            font-weight: bold;
        }

        .priority-bar-container {
            background-color: #e0e0e0;
            border-radius: 4px;
            height: 20px;
            width: 100%;
            min-width: 100px;
        }

        .priority-bar {
            height: 100%;
            background-color: var(--secondary-color);
            border-radius: 4px;
            transition: width 0.5s ease-in-out;
        }

        .info-box {
            background-color: #e8f4fc;
            border-left: 4px solid var(--secondary-color);
            padding: 1rem;
            margin-bottom: 1.5rem;
            border-radius: 0 4px 4px 0;
        }

        .info-box p {
            margin: 0;
            color: var(--primary-color);
        }

        #toast-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s, transform 0.3s;
            transform: translateY(-20px);
        }

        #toast-notification.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        #toast-notification.success {
            background-color: var(--success-color);
        }

        #toast-notification.info {
            background-color: #3498db;
        }

        /* --- ESTILOS PARA INPUT TABS (INTERNAS) --- */
        .input-tabs-nav {
            display: flex;
            background-color: #f1f5f9;
            border-radius: 8px 8px 0 0;
            overflow-x: auto;
            border-bottom: 2px solid var(--secondary-color);
            margin-bottom: 0;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .input-tabs-nav::-webkit-scrollbar {
            display: none;
        }

        /* CORREGIDO: Selector más específico para input tabs */
        .input-tabs-nav .input-tab {
            padding: 1rem 1.5rem;
            border: none;
            background: none !important;
            /* IMPORTANTE: Anula el fondo azul */
            cursor: pointer;
            font-weight: 700;
            color: #64748b !important;
            /* IMPORTANTE: Anula el texto blanco */
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            flex: 1;
            justify-content: center;
            min-width: 140px;
            margin: 0 !important;
            /* IMPORTANTE: Anula el margin */
            border-radius: 0 !important;
            /* IMPORTANTE: Anula el border-radius */
        }

        .input-tabs-nav .input-tab:hover {
            background-color: #e2e8f0 !important;
            /* IMPORTANTE: Anula el fondo azul */
            color: var(--primary-color) !important;
        }

        .input-tabs-nav .input-tab.active {
            background-color: #fff !important;
            /* IMPORTANTE: Anula el fondo azul */
            color: var(--secondary-color) !important;
            border-bottom-color: var(--secondary-color);
            border-radius: 8px 8px 0 0;
            margin-bottom: -2px;
            border-left: 1px solid #e1e5e9;
            border-right: 1px solid #e1e5e9;
            border-top: 1px solid #e1e5e9;
        }

        .input-tab-content {
            display: none;
            padding-top: 1.5rem;
            border: 1px solid #e1e5e9;
            border-top: none;
            border-radius: 0 0 8px 8px;
            padding: 1.5rem;
            background-color: white;
        }

        .input-tab-content.active {
            display: block;
        }

        /* BOTONES DE NAVEGACIÓN ENTRE TABS (como en kano) */
        .tab-nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #eee;
            width: 100%;
            box-sizing: border-box;
        }

        .btn-next-tab {
            background-color: var(--secondary-color);
            color: white;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.7rem 1.25rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            font-family: 'Nunito', sans-serif;
            transition: background-color 0.3s, transform 0.2s;
        }

        .btn-next-tab:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        .btn-next-tab.btn-prev {
            background-color: #95a5a6;
        }

        .btn-next-tab.btn-prev:hover {
            background-color: #7f8c8d;
        }

        footer {
            padding: 2rem 1.25rem;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
        }

        .disclaimer-note {
            margin-top: 2rem;
            padding: 0 1rem;
            font-size: 0.8rem;
            color: #777;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            text-align: left;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .main-content-wrapper {
                padding: 1rem;
            }

            .content-block {
                padding: 1rem;
                margin: 0 auto 1rem;
            }

            footer {
                padding: 1.5rem 1rem;
            }

            .input-tabs-nav .input-tab {
                padding: 0.8rem 1rem;
                min-width: 120px;
                font-size: 0.9rem;
            }

            .main-action-buttons {
                gap: 0.75rem;
                margin: 1rem auto 0;
            }

            .main-action-buttons button {
                padding: 0.7rem 1.2rem;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .main-content-wrapper {
                padding: 0.75rem;
            }

            .content-block {
                padding: 0.75rem;
                border-radius: 6px;
            }

            footer {
                padding: 1rem 0.75rem;
            }

            .input-tabs-nav .input-tab {
                padding: 0.6rem 0.75rem;
                min-width: 100px;
                font-size: 0.85rem;
            }

            .main-action-buttons {
                flex-direction: column;
                align-items: stretch;
                gap: 0.5rem;
                margin: 1rem auto 0;
            }

            .main-action-buttons button {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <!-- Contenedor para el header dinámico -->
    <div id="header-container"></div>

    <noscript>
        <nav>
            <a href="/">Home</a> |
            <a href="/8d">8D Tool</a> |
            <a href="/taguchi_doe">Taguchi DOE</a> |
            <a href="/swot">SWOT Analysis</a> |
            <a href="/balancedcard">Balanced Scorecard</a> |
            <a href="/qfd">QFD</a> |
            <a href="/apqp-ppap">APQP/PPAP</a> |
            <a href="/ishikawa">Ishikawa</a> |
            <a href="/fmea">FMEA</a> |
            <a href="/vave">VAVE</a> |
            <a href="/eisenhower">Eisenhower Matrix</a> |
            <a href="/triz">TRIZ</a> |
            <a href="/weibull">Weibull</a> |
            <a href="/stack_up_analysis">Tolerance Stack-Up</a> |
            <a href="/pdca">PDCA</a> |
            <a href="/design_thinking">Design Thinking</a> |
            <a href="/pugh">Pugh Matrix</a> |
            <a href="/cpk_calculator">CpK Calculator</a> |
            <a href="/control-plan">Control Plan</a>
        </nav>
    </noscript>

    <main class="main-content-wrapper">
        <div id="toast-notification"></div>

        <!-- HEADER EXACTO COMO EN KANO -->
        <header class="main-header">
            <h1>
                <div class="tool-logo" title="QFD">
                    <i class="fas fa-chart-bar"></i>
                </div>
                Free Online Quality Function Deployment (QFD) Tool
            </h1>
            <p>Translating Customer Needs into Technical Reality with the House of Quality</p>

            <!-- BOTONES PRINCIPALES EXACTOS COMO EN KANO -->
            <div class="main-action-buttons">
                <button id="loadExampleBtn" class="btn-example">
                    <i class="fas fa-play-circle"></i> Load Example
                </button>
                <button id="resetBtn" class="btn-reset">
                    <i class="fas fa-sync-alt"></i> Reset All
                </button>
            </div>
        </header>

        <!-- CONTENEDOR DE TABS EXACTO COMO EN KANO -->
        <div class="tabs-container">
            <!-- NAVEGACIÓN DE PESTAÑAS EXACTA COMO KANO -->
            <nav class="tabs-nav">
                <button class="tab-btn active" onclick="switchQfdTab('tab-theory')">
                    <i class="fas fa-book"></i> Theory & Info
                </button>
                <button class="tab-btn" onclick="switchQfdTab('tab-input')">
                    <i class="fas fa-edit"></i> Input Data
                </button>
                <button class="tab-btn" onclick="switchQfdTab('tab-results')">
                    <i class="fas fa-chart-bar"></i> Results & Matrix
                </button>
            </nav>

            <!-- PESTAÑA 1: TEORÍA -->
            <div id="tab-theory" class="wizard-tab-content active">
                <div class="tab-content-wrapper">
                    <!-- Contenido de Theory & Info (igual que antes) -->
                    <div class="content-block">
                        <h2><i class="fas fa-question-circle"></i> What is Quality Function Deployment?</h2>
                        <p>Quality Function Deployment (QFD) is a structured methodology used to translate customer
                            requirements—the
                            "Voice of the Customer" (VOC)—into detailed engineering specifications for a product or
                            service. The
                            primary tool of QFD is the <strong>House of Quality</strong>, a matrix that connects what
                            the customer
                            wants to how the organization can deliver it. It's a roadmap for prioritizing design efforts
                            on what
                            truly matters to the customer.</p>
                        <div class="infographic-flow">
                            <div class="flow-step"><i class="fas fa-users"></i><strong>1. Customer
                                    Needs</strong><span>What do they
                                    want?</span></div>
                            <div class="flow-arrow"><i class="fas fa-long-arrow-alt-right"></i></div>
                            <div class="flow-step"><i class="fas fa-cogs"></i><strong>2. Technical
                                    Specs</strong><span>How can we
                                    achieve it?</span></div>
                            <div class="flow-arrow"><i class="fas fa-long-arrow-alt-right"></i></div>
                            <div class="flow-step"><i class="fas fa-link"></i><strong>3. Relationships</strong><span>How
                                    do they
                                    connect?</span></div>
                            <div class="flow-arrow"><i class="fas fa-long-arrow-alt-right"></i></div>
                            <div class="flow-step"><i class="fas fa-trophy"></i><strong>4.
                                    Priorities</strong><span>What's most
                                    important?</span></div>
                        </div>
                    </div>

                    <div class="content-block">
                        <h2><i class="fas fa-list-ol"></i> Key Components of the House of Quality</h2>
                        <p>The "House of Quality" gets its name from its house-like shape. Each section has a specific
                            purpose:</p>
                        <ul class="key-components-list">
                            <li><strong>Customer Requirements (The "Whats"):</strong> The left "wall" of the house,
                                listing the
                                wants and needs gathered from the customer.</li>
                            <li><strong>Importance to Customer:</strong> A ranking of how critical each customer
                                requirement is,
                                typically on a 1-5 scale.</li>
                            <li><strong>Technical Requirements (The "Hows"):</strong> The "ceiling" of the house,
                                listing the
                                engineering characteristics or design parameters that can be measured and controlled.
                            </li>
                            <li><strong>Relationship Matrix:</strong> The main "room" of the house, where the
                                relationships between
                                customer needs and technical requirements are scored (e.g., strong, medium, weak).</li>
                            <li><strong>Correlation Matrix (The "Roof"):</strong> Shows how the technical requirements
                                interact with
                                each other—do they support or conflict with one another?</li>
                            <li><strong>Technical Priorities:</strong> The "floor" or "basement" of the house, which
                                calculates the
                                importance of each technical requirement based on the customer needs it affects. This is
                                the primary
                                output of the matrix.</li>
                        </ul>
                    </div>

                    <div class="content-block">
                        <h2><i class="fas fa-history"></i> Brief History & Purpose</h2>
                        <p>QFD was developed in Japan in the late 1960s by quality experts Yoji Akao and Shigeru Mizuno.
                            It was
                            first implemented at Mitsubishi's Kobe shipyard and later popularized by Toyota and its
                            suppliers. The
                            core purpose of QFD is to ensure that the <strong>Voice of the Customer</strong> is not lost
                            during the
                            complex process of design, engineering, and manufacturing.</p>
                        <p>By systematically linking customer desires to technical functions, QFD helps teams focus
                            resources on the
                            most critical features. This proactive approach prevents costly late-stage design changes,
                            shortens
                            development time, and ultimately leads to higher customer satisfaction and market success.
                        </p>
                    </div>

                    <div class="content-block">
                        <h2><i class="fas fa-tools"></i> How to Use This Tool</h2>
                        <div class="instructions-box">
                            <ul>
                                <li>Navigate to the <strong>Input Data</strong> tab to start entering your requirements
                                </li>
                                <li><strong>Customer Needs & Technical Specs:</strong> Type a requirement/spec into the
                                    text field
                                    and click the green `+` button to add it to the list. Remove items with the red `-`
                                    button.</li>
                                <li><strong>Relationships & Correlations:</strong> Use the tabs within the Input Data
                                    section to define relationships and correlations</li>
                                <li>Click <strong><i class="fas fa-home"></i> Generate House of Quality</strong> to
                                    build the matrix
                                    and see the prioritized technical requirements.</li>
                                <li>Use <strong><i class="fas fa-lightbulb"></i> Load Example</strong> for a pre-filled
                                    demonstration or <strong><i class="fas fa-file-excel"></i> Export to Excel</strong>
                                    to save your
                                    work.</li>
                            </ul>
                        </div>
                    </div>

                    <div class="tab-nav-buttons">
                        <button class="btn-next-tab" onclick="switchQfdTab('tab-input')">Start Adding Requirements
                            <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
            </div>

            <!-- PESTAÑA 2: DATOS DE ENTRADA -->
            <div id="tab-input" class="wizard-tab-content">
                <div class="tab-content-wrapper">
                    <div class="content-block">
                        <div class="tool-header">
                            <h2><i class="fas fa-drafting-compass"></i> QFD Input Data - Build Your House of Quality
                            </h2>
                        </div>

                        <div class="info-box">
                            <p><i class="fas fa-info-circle"></i> Use the tabs below to enter all necessary data for
                                your QFD analysis. Start with Customer Needs, then add Technical Specifications, define
                                Relationships, and finally set Correlations.</p>
                        </div>

                        <!-- TABS INTERNAS -->
                        <div class="input-tabs-nav">
                            <div class="input-tab active" data-input-tab="customer-needs">
                                <i class="fas fa-users"></i> Customer Needs
                            </div>
                            <div class="input-tab" data-input-tab="technical-specs">
                                <i class="fas fa-cogs"></i> Technical Specs
                            </div>
                            <div class="input-tab" data-input-tab="relationships">
                                <i class="fas fa-link"></i> Relationships
                            </div>
                            <div class="input-tab" data-input-tab="correlations">
                                <i class="fas fa-project-diagram"></i> Correlations
                            </div>
                        </div>

                        <!-- CONTENIDO DE CUSTOMER NEEDS -->
                        <div class="input-tab-content active" id="input-customer-needs">
                            <h3><i class="fas fa-users"></i> Customer Requirements (The "Whats")</h3>
                            <p>Enter the voice of the customer - what they need, want, or expect from the
                                product/service.</p>

                            <label for="newCustomerReqText">Add New Customer Requirement:</label>
                            <div class="add-item-form">
                                <div class="input-group">
                                    <input type="text" id="newCustomerReqText"
                                        placeholder="e.g., 'Easy to use', 'Durable', 'Affordable'...">
                                </div>
                                <div class="select-group">
                                    <select id="importanceScale">
                                        <option value="1">Importance: 1 (Low)</option>
                                        <option value="2">Importance: 2</option>
                                        <option value="3">Importance: 3 (Medium)</option>
                                        <option value="4">Importance: 4</option>
                                        <option value="5" selected>Importance: 5 (High)</option>
                                    </select>
                                </div>
                                <button id="addCustomerReqBtn" class="btn-add" title="Add Requirement">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>

                            <label>Current Customer Requirements:</label>
                            <div id="customerReqList" class="list-container">
                                <!-- Customer requirements will be dynamically added here -->
                                <div style="text-align: center; padding: 2rem; color: #777;">
                                    <i class="fas fa-users" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                                    <p>No customer requirements added yet. Add your first requirement above.</p>
                                </div>
                            </div>
                        </div>

                        <!-- CONTENIDO DE TECHNICAL SPECS -->
                        <div class="input-tab-content" id="input-technical-specs">
                            <h3><i class="fas fa-cogs"></i> Technical Specifications (The "Hows")</h3>
                            <p>Enter measurable engineering characteristics that can fulfill customer requirements.</p>

                            <label for="newTechnicalSpecText">Add New Technical Specification:</label>
                            <div class="add-item-form">
                                <div class="input-group">
                                    <input type="text" id="newTechnicalSpecText"
                                        placeholder="e.g., 'Weight (g)', 'Material thickness', 'Cost ($)'...">
                                </div>
                                <button id="addTechnicalSpecBtn" class="btn-add" title="Add Specification">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>

                            <label>Current Technical Specifications:</label>
                            <div id="technicalSpecList" class="list-container">
                                <!-- Technical specs will be dynamically added here -->
                                <div style="text-align: center; padding: 2rem; color: #777;">
                                    <i class="fas fa-cogs" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                                    <p>No technical specifications added yet. Add your first specification above.</p>
                                </div>
                            </div>
                        </div>

                        <!-- CONTENIDO DE RELATIONSHIPS -->
                        <div class="input-tab-content" id="input-relationships">
                            <h3><i class="fas fa-link"></i> Relationship Matrix</h3>
                            <p>Define how strongly each customer requirement relates to each technical specification.
                            </p>
                            <p><strong>Strong (9):</strong> Strong correlation | <strong>Medium (3):</strong> Moderate
                                correlation | <strong>Weak (1):</strong> Weak correlation</p>

                            <div id="relationshipControls" class="table-responsive-wrapper">
                                <div style="text-align: center; padding: 2rem; color: #777;">
                                    <i class="fas fa-link" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                                    <p>Add customer requirements and technical specifications first to see the
                                        relationship matrix.</p>
                                </div>
                            </div>
                        </div>

                        <!-- CONTENIDO DE CORRELATIONS -->
                        <div class="input-tab-content" id="input-correlations">
                            <h3><i class="fas fa-project-diagram"></i> Correlation Matrix (The "Roof")</h3>
                            <p>Define how technical specifications interact with each other.</p>
                            <p><strong>++:</strong> Strong Positive | <strong>+:</strong> Positive | <strong>-:</strong>
                                Negative | <strong>--:</strong> Strong Negative</p>

                            <div id="correlationControls" class="table-responsive-wrapper">
                                <div style="text-align: center; padding: 2rem; color: #777;">
                                    <i class="fas fa-project-diagram" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                                    <p>Add at least 2 technical specifications to see the correlation matrix.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-nav-buttons">
                        <button class="btn-next-tab btn-prev" onclick="switchQfdTab('tab-theory')"><i
                                class="fas fa-arrow-left"></i> Back to Theory</button>
                        <button class="btn-next-tab" onclick="switchQfdTab('tab-results')">Go to Results <i
                                class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
            </div>

            <!-- PESTAÑA 3: RESULTADOS Y MATRIZ -->
            <div id="tab-results" class="wizard-tab-content">
                <div class="tab-content-wrapper">
                    <!-- Sección para generar la matriz -->
                    <div class="content-block" id="generate-section">
                        <h2><i class="fas fa-cogs"></i> Generate House of Quality</h2>
                        <p>When you've finished entering all data in the Input Data tab, click below to generate the
                            House of Quality matrix.</p>

                        <div style="text-align: center; margin: 2rem 0;">
                            <button id="generateQfdBtn" style="padding: 1rem 2rem; font-size: 1.1rem; margin: 0 auto;">
                                <i class="fas fa-home"></i> Generate House of Quality Matrix
                            </button>
                            <p style="margin-top: 0.5rem; color: #777; font-size: 0.9rem;">
                                <i class="fas fa-lightbulb"></i> Make sure you've entered data in all sections before
                                generating.
                            </p>
                        </div>

                        <div class="info-box">
                            <p><i class="fas fa-info-circle"></i> Need to edit your data? Go back to the <strong>Input
                                    Data</strong> tab using the navigation button below.</p>
                        </div>
                    </div>

                    <div id="qfdMatrix" class="content-block" style="display: none;">
                        <div class="tool-header">
                            <h2><i class="fas fa-table"></i> House of Quality Matrix</h2>
                            <button id="backToInputBtn" style="background-color: var(--warning-color);">
                                <i class="fas fa-edit"></i> Edit Input Data
                            </button>
                        </div>
                        <div id="qfdMatrixContainer" class="table-responsive-wrapper">
                            <div style="text-align: center; padding: 3rem; color: #777;">
                                <i class="fas fa-home" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                                <h3>House of Quality Matrix Not Generated Yet</h3>
                                <p>Click the "Generate House of Quality Matrix" button above to create your matrix.</p>
                            </div>
                        </div>
                    </div>

                    <div class="content-block">
                        <h2><i class="fas fa-award"></i> Prioritized Technical Requirements</h2>
                        <div class="table-responsive-wrapper">
                            <table id="priorityTable" class="qfd-table">
                                <thead>
                                    <tr>
                                        <th style="width: 40%;">Technical Requirement</th>
                                        <th style="width: 15%;">Priority Score</th>
                                        <th style="width: 35%;">Priority</th>
                                        <th style="width: 10%;">Rank</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="4" style="text-align: center; padding: 2rem; color: #777;">
                                            <i class="fas fa-chart-bar"
                                                style="font-size: 2rem; margin-bottom: 1rem;"></i>
                                            <p>Priority rankings will appear here after generating the House of Quality
                                                matrix.</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div style="margin-top: 2rem; display: flex; gap: 1rem; justify-content: center;">
                            <button id="exportQfdBtn" style="flex: 1; max-width: 300px;">
                                <i class="fas fa-file-excel"></i> Export to Excel
                            </button>
                            <button id="printQfdBtn" style="flex: 1; max-width: 300px; background-color: #7d3c98;">
                                <i class="fas fa-print"></i> Print Results
                            </button>
                        </div>
                    </div>

                    <div class="tab-nav-buttons">
                        <button class="btn-next-tab btn-prev" onclick="switchQfdTab('tab-input')"><i
                                class="fas fa-arrow-left"></i> Back to Input & Edit</button>
                        <button class="btn-next-tab" onclick="switchQfdTab('tab-theory')">Back to Theory <i
                                class="fas fa-book"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="disclaimer-note">
            <p><strong>Disclaimer:</strong> The tools and information provided on Sigma Exacta are for informational and
                educational purposes only. This tool is based on the Quality Function Deployment (QFD) methodology, also
                known as the House of Quality, developed by Yoji Akao and Shigeru Mizuno. The tools on this site are
                independent implementations and are not affiliated with, sponsored by, or endorsed by the original
                creators or any specific institution. While we strive for accuracy, we make no warranty or guarantee
                regarding the results. All decisions related to product design, engineering priorities, or strategic
                planning based on the output of this tool are the sole responsibility of the user. Sigma Exacta and its
                creators are not liable for any damages or losses resulting from the use of this website.</p>
        </div>
    </footer>

    <script>
        // Función para cambiar entre tabs principales (como en kano)
        function switchQfdTab(tabId) {
            // Quitar clase active de todos los botones y contenidos
            document.querySelectorAll('.tabs-nav .tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.wizard-tab-content').forEach(content => content.classList.remove('active'));

            // Activar el contenido seleccionado
            document.getElementById(tabId).classList.add('active');

            // Activar botón correspondiente
            const activeBtn = document.querySelector(`.tabs-nav .tab-btn[onclick="switchQfdTab('${tabId}')"]`);
            if (activeBtn) activeBtn.classList.add('active');

            // Scroll al top suavemente
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Función para cambiar entre pestañas de input
        function switchInputTab(tabId) {
            // Quitar clase active de todos los botones y contenidos de input
            document.querySelectorAll('.input-tabs-nav .input-tab').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.input-tab-content').forEach(content => content.classList.remove('active'));

            // Activar el contenido seleccionado
            document.getElementById('input-' + tabId).classList.add('active');

            // Activar botón correspondiente
            const activeBtn = document.querySelector(`.input-tabs-nav .input-tab[data-input-tab="${tabId}"]`);
            if (activeBtn) activeBtn.classList.add('active');

            // Actualizar controles si es necesario
            if (tabId === 'relationships') updateRelationshipControls();
            if (tabId === 'correlations') updateCorrelationControls();
        }

        // Cargar el header dinámicamente
        fetch('header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('header-container').innerHTML = data;
                // Inicializar el menú después de cargar el header
                initializeMenu();
            })
            .catch(error => console.error('Error loading header:', error));

        function initializeMenu() {
            const navToggle = document.getElementById('nav-toggle');
            const navMenu = document.getElementById('nav-menu');
            const toolsDropdownToggle = document.getElementById('tools-dropdown-toggle');
            const toolsDropdownMenu = document.getElementById('tools-dropdown-menu');
            const toolsDropdownContainer = document.getElementById('tools-dropdown-container');

            if (navToggle && navMenu) {
                navToggle.addEventListener('click', () => {
                    navMenu.classList.toggle('show-menu');
                    const icon = navToggle.querySelector('i');
                    icon.classList.toggle('fa-bars');
                    icon.classList.toggle('fa-times');

                    if (!navMenu.classList.contains('show-menu')) {
                        toolsDropdownMenu.classList.remove('show-submenu');
                        toolsDropdownContainer.classList.remove('active');
                    }
                });
            }

            if (toolsDropdownToggle && toolsDropdownMenu && toolsDropdownContainer) {
                toolsDropdownToggle.addEventListener('click', (event) => {
                    if (window.innerWidth <= 992) {
                        event.preventDefault();
                        toolsDropdownMenu.classList.toggle('show-submenu');
                        toolsDropdownContainer.classList.toggle('active');
                    }
                });
            }
        }

        // Variables globales para datos del QFD
        let customerRequirements = [];
        let technicalRequirements = [];
        let relationships = {};
        let correlations = {};

        // Función para renderizar requisitos del cliente
        function renderCustomerRequirements() {
            const list = document.getElementById('customerReqList');
            if (customerRequirements.length === 0) {
                list.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: #777;">
                        <i class="fas fa-users" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                        <p>No customer requirements added yet. Add your first requirement above.</p>
                    </div>
                `;
                return;
            }

            list.innerHTML = customerRequirements.map(req => `
                <div class="list-item" data-id="${req.id}">
                    <span>${req.text}</span>
                    <div class="customer-importance-container">
                        <div class="customer-importance-bar-bg">
                            <div class="customer-importance-bar" style="width: ${(req.importance / 5) * 100}%;"></div>
                        </div>
                        <span style="min-width: 20px; text-align: center;">${req.importance}</span>
                    </div>
                    <button class="btn-remove" title="Remove Requirement">
                        <i class="fas fa-minus"></i>
                    </button>
                </div>
            `).join('');
        }

        // Función para renderizar especificaciones técnicas
        function renderTechnicalSpecs() {
            const list = document.getElementById('technicalSpecList');
            if (technicalRequirements.length === 0) {
                list.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: #777;">
                        <i class="fas fa-cogs" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                        <p>No technical specifications added yet. Add your first specification above.</p>
                    </div>
                `;
                return;
            }

            list.innerHTML = technicalRequirements.map(spec => `
                <div class="list-item" data-id="${spec.id}">
                    <span>${spec.text}</span>
                    <button class="btn-remove" title="Remove Specification">
                        <i class="fas fa-minus"></i>
                    </button>
                </div>
            `).join('');
        }

        // Inicializar cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', () => {
            // Renderizar listas iniciales
            renderCustomerRequirements();
            renderTechnicalSpecs();

            // Configurar event listeners para tabs de input
            document.querySelectorAll('.input-tabs-nav .input-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-input-tab');
                    switchInputTab(tabId);
                });
            });

            // Agregar requisitos del cliente
            document.getElementById('addCustomerReqBtn').addEventListener('click', () => {
                const input = document.getElementById('newCustomerReqText');
                const text = input.value.trim();
                if (!text) {
                    showToast('Please enter a customer requirement.', 'info');
                    return;
                }

                const importance = document.getElementById('importanceScale').value;
                customerRequirements.push({
                    id: 'cr_' + Date.now(),
                    text: text,
                    importance: parseInt(importance)
                });

                input.value = '';
                input.focus();
                renderCustomerRequirements();
                showToast('Customer requirement added.', 'success');

                // Actualizar controles de relación si están visibles
                if (document.getElementById('input-relationships').classList.contains('active')) {
                    updateRelationshipControls();
                }
            });

            // Agregar especificaciones técnicas
            document.getElementById('addTechnicalSpecBtn').addEventListener('click', () => {
                const input = document.getElementById('newTechnicalSpecText');
                const text = input.value.trim();
                if (!text) {
                    showToast('Please enter a technical specification.', 'info');
                    return;
                }

                technicalRequirements.push({
                    id: 'tr_' + Date.now(),
                    text: text
                });

                input.value = '';
                input.focus();
                renderTechnicalSpecs();
                showToast('Technical specification added.', 'success');

                // Actualizar controles si están visibles
                if (document.getElementById('input-relationships').classList.contains('active')) {
                    updateRelationshipControls();
                }
                if (document.getElementById('input-correlations').classList.contains('active')) {
                    updateCorrelationControls();
                }
            });

            // Permitir agregar con Enter
            document.getElementById('newCustomerReqText').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    document.getElementById('addCustomerReqBtn').click();
                }
            });

            document.getElementById('newTechnicalSpecText').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    document.getElementById('addTechnicalSpecBtn').click();
                }
            });

            // Eliminar requisitos del cliente
            document.getElementById('customerReqList').addEventListener('click', (e) => {
                if (e.target.closest('.btn-remove')) {
                    const itemId = e.target.closest('.list-item').dataset.id;
                    customerRequirements = customerRequirements.filter(req => req.id !== itemId);
                    renderCustomerRequirements();
                    showToast('Customer requirement removed.', 'info');

                    // Actualizar controles de relación
                    updateRelationshipControls();
                }
            });

            // Eliminar especificaciones técnicas
            document.getElementById('technicalSpecList').addEventListener('click', (e) => {
                if (e.target.closest('.btn-remove')) {
                    const itemId = e.target.closest('.list-item').dataset.id;
                    technicalRequirements = technicalRequirements.filter(spec => spec.id !== itemId);
                    renderTechnicalSpecs();
                    showToast('Technical specification removed.', 'info');

                    // Actualizar controles
                    updateRelationshipControls();
                    updateCorrelationControls();
                }
            });

            // Cambios en relaciones
            document.getElementById('relationshipControls').addEventListener('change', e => {
                if (e.target.tagName === 'SELECT') {
                    const relationshipId = `${e.target.dataset.crId}_${e.target.dataset.trId}`;
                    if (e.target.value) {
                        relationships[relationshipId] = e.target.value;
                    } else {
                        delete relationships[relationshipId];
                    }
                }
            });

            // Cambios en correlaciones
            document.getElementById('correlationControls').addEventListener('change', e => {
                if (e.target.tagName === 'SELECT') {
                    const correlationId = `${e.target.dataset.tr1Id}_${e.target.dataset.tr2Id}`;
                    if (e.target.value) {
                        correlations[correlationId] = e.target.value;
                    } else {
                        delete correlations[correlationId];
                    }
                }
            });

            // Generar matriz QFD - ACTUALIZADO
            document.getElementById('generateQfdBtn').addEventListener('click', () => {
                if (customerRequirements.length === 0) {
                    showToast('Please add at least one customer requirement.', 'info');
                    switchQfdTab('tab-input');
                    switchInputTab('customer-needs');
                    return;
                }

                if (technicalRequirements.length === 0) {
                    showToast('Please add at least one technical specification.', 'info');
                    switchQfdTab('tab-input');
                    switchInputTab('technical-specs');
                    return;
                }

                generateQfdMatrix();
                calculatePriorities();

                // Ocultar la sección de generar y mostrar la matriz
                document.getElementById('generate-section').style.display = 'none';
                document.getElementById('qfdMatrix').style.display = 'block';

                showToast('House of Quality matrix generated successfully!', 'success');

                // Hacer scroll a la matriz generada
                setTimeout(() => {
                    document.getElementById('qfdMatrix').scrollIntoView({
                        behavior: 'smooth'
                    });
                }, 300);
            });

            // Botón para volver a input data - ACTUALIZADO
            document.getElementById('backToInputBtn').addEventListener('click', () => {
                // Mostrar nuevamente la sección de generar
                document.getElementById('generate-section').style.display = 'block';
                document.getElementById('qfdMatrix').style.display = 'none';

                // Cambiar a la pestaña de input
                switchQfdTab('tab-input');
            });

            // Botón de imprimir
            document.getElementById('printQfdBtn').addEventListener('click', () => {
                window.print();
            });

            // Cargar ejemplo - MODIFICADO PARA HACER SCROLL A INPUT DATA
            document.getElementById('loadExampleBtn').addEventListener('click', loadExample);

            // Resetear todo
            document.getElementById('resetBtn').addEventListener('click', resetAll);

            // Exportar a Excel
            document.getElementById('exportQfdBtn').addEventListener('click', exportToExcel);
        });

        // Actualizar controles de relación
        function updateRelationshipControls() {
            const container = document.getElementById('relationshipControls');

            if (customerRequirements.length === 0 || technicalRequirements.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: #777;">
                        <i class="fas fa-link" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                        <p>Add customer requirements and technical specifications first to see the relationship matrix.</p>
                    </div>
                `;
                return;
            }

            const table = document.createElement('table');
            table.className = 'qfd-table';

            let headerHtml = '<thead><tr><th>Customer Need</th><th>Importance</th>';
            technicalRequirements.forEach(tr => {
                headerHtml += `<th>${tr.text}</th>`;
            });
            headerHtml += '</tr></thead><tbody>';

            customerRequirements.forEach(cr => {
                headerHtml += `<tr><td class="customer-requirements">${cr.text}</td><td class="importance-cell">${cr.importance}</td>`;
                technicalRequirements.forEach(tr => {
                    const relId = `${cr.id}_${tr.id}`;
                    const currentVal = relationships[relId] || '';
                    headerHtml += `
                        <td>
                            <select data-cr-id="${cr.id}" data-tr-id="${tr.id}" style="min-width: 100px;">
                                <option value="" ${!currentVal ? 'selected' : ''}>None</option>
                                <option value="strong" ${currentVal === 'strong' ? 'selected' : ''}>Strong (9)</option>
                                <option value="medium" ${currentVal === 'medium' ? 'selected' : ''}>Medium (3)</option>
                                <option value="weak" ${currentVal === 'weak' ? 'selected' : ''}>Weak (1)</option>
                            </select>
                        </td>`;
                });
                headerHtml += '</tr>';
            });

            table.innerHTML = headerHtml + '</tbody>';
            container.innerHTML = '';
            container.appendChild(table);
        }

        // Actualizar controles de correlación
        function updateCorrelationControls() {
            const container = document.getElementById('correlationControls');

            if (technicalRequirements.length < 2) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: #777;">
                        <i class="fas fa-project-diagram" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                        <p>Add at least 2 technical specifications to see the correlation matrix.</p>
                    </div>
                `;
                return;
            }

            const table = document.createElement('table');
            table.className = 'qfd-table';

            let tableHtml = '<thead><tr><th></th>';
            technicalRequirements.forEach(tr => {
                tableHtml += `<th>${tr.text}</th>`;
            });
            tableHtml += '</tr></thead><tbody>';

            technicalRequirements.forEach((tr1, i) => {
                tableHtml += `<tr><th class="technical-requirements">${tr1.text}</th>`;
                technicalRequirements.forEach((tr2, j) => {
                    if (i >= j) {
                        tableHtml += `<td style="background-color: #f5f5f5;"></td>`;
                    } else {
                        const corrId = `${tr1.id}_${tr2.id}`;
                        const currentVal = correlations[corrId] || '';
                        tableHtml += `
                            <td>
                                <select data-tr1-id="${tr1.id}" data-tr2-id="${tr2.id}" style="min-width: 100px;">
                                    <option value="" ${!currentVal ? 'selected' : ''}>None</option>
                                    <option value="positive-strong" ${currentVal === 'positive-strong' ? 'selected' : ''}>++ Strong Positive</option>
                                    <option value="positive-weak" ${currentVal === 'positive-weak' ? 'selected' : ''}>+ Positive</option>
                                    <option value="negative-weak" ${currentVal === 'negative-weak' ? 'selected' : ''}>- Negative</option>
                                    <option value="negative-strong" ${currentVal === 'negative-strong' ? 'selected' : ''}>-- Strong Negative</option>
                                </select>
                            </td>`;
                    }
                });
                tableHtml += '</tr>';
            });

            table.innerHTML = tableHtml + '</tbody>';
            container.innerHTML = '';
            container.appendChild(table);
        }

        // Generar matriz QFD
        function generateQfdMatrix() {
            const container = document.getElementById('qfdMatrixContainer');
            const table = document.createElement('table');
            table.className = 'qfd-table';
            table.id = 'qfdFinalTable';

            // Crear techo de la casa (correlaciones)
            const thead = table.createTHead();
            for (let i = 0; i < technicalRequirements.length; i++) {
                const row = thead.insertRow();

                if (i === 0) {
                    const cell = document.createElement('th');
                    cell.rowSpan = technicalRequirements.length;
                    cell.colSpan = 2;
                    cell.style.backgroundColor = "#f5f5f5";
                    cell.style.border = "none";
                    cell.innerHTML = "<strong>Correlations (Roof)</strong>";
                    row.appendChild(cell);
                }

                for (let j = 0; j < i; j++) {
                    row.insertCell().style.border = 'none';
                }

                const th = document.createElement('th');
                th.className = "technical-requirements";
                th.innerHTML = technicalRequirements[i].text;
                row.appendChild(th);

                for (let j = i + 1; j < technicalRequirements.length; j++) {
                    const cell = row.insertCell();
                    const corr = correlations[`${technicalRequirements[i].id}_${technicalRequirements[j].id}`] || '';

                    if (corr.includes('positive')) {
                        cell.textContent = corr.includes('weak') ? '+' : '++';
                        cell.className = `correlation-${corr}`;
                    } else if (corr.includes('negative')) {
                        cell.textContent = corr.includes('weak') ? '-' : '--';
                        cell.className = `correlation-${corr}`;
                    }
                }
            }

            // Crear cuerpo principal (relaciones)
            const tbody = table.createTBody();
            customerRequirements.forEach(cr => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td class="customer-requirements">${cr.text}</td>
                    <td class="importance-cell">${cr.importance}</td>
                `;

                technicalRequirements.forEach(tr => {
                    const cell = row.insertCell();
                    const rel = relationships[`${cr.id}_${tr.id}`] || '';

                    if (rel === 'strong') {
                        cell.textContent = '●';
                        cell.className = 'relationship-strong';
                        cell.title = 'Strong relationship (9)';
                    } else if (rel === 'medium') {
                        cell.textContent = '○';
                        cell.className = 'relationship-medium';
                        cell.title = 'Medium relationship (3)';
                    } else if (rel === 'weak') {
                        cell.textContent = '▲';
                        cell.className = 'relationship-weak';
                        cell.title = 'Weak relationship (1)';
                    }
                });
            });

            // Crear pie de página (prioridades y rankings)
            const tfoot = table.createTFoot();
            const priorityRow = tfoot.insertRow();
            priorityRow.innerHTML = `<th class="technical-requirements" colspan="2">Technical Priority Score</th>`;

            technicalRequirements.forEach(tr => {
                const cell = priorityRow.insertCell();
                cell.id = `priority_${tr.id}`;
                cell.style.fontWeight = 'bold';
            });

            const rankRow = tfoot.insertRow();
            rankRow.innerHTML = `<th class="technical-requirements" colspan="2">Rank</th>`;

            technicalRequirements.forEach(tr => {
                const cell = rankRow.insertCell();
                cell.id = `rank_${tr.id}`;
                cell.style.fontWeight = 'bold';
            });

            container.innerHTML = '';
            container.appendChild(table);
        }

        // Calcular prioridades
        function calculatePriorities() {
            const priorityTableBody = document.querySelector('#priorityTable tbody');
            const techScores = calculatePrioritiesForExport();

            if (techScores.length === 0) {
                priorityTableBody.innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 2rem; color: #777;">
                            <i class="fas fa-chart-bar" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                            <p>Priority rankings will appear here after generating the House of Quality matrix.</p>
                        </td>
                    </tr>
                `;
                return;
            }

            const maxScore = Math.max(...techScores.map(t => t.score), 1);

            priorityTableBody.innerHTML = techScores.map(tech => `
                <tr>
                    <td>${tech.text}</td>
                    <td><strong>${tech.score}</strong></td>
                    <td>
                        <div class="priority-bar-container">
                            <div class="priority-bar" style="width: ${(tech.score / maxScore) * 100}%;"></div>
                        </div>
                    </td>
                    <td><span style="background-color: ${getRankColor(tech.rank)}; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-weight: bold;">${tech.rank}</span></td>
                </tr>
            `).join('');

            // Actualizar celdas en la matriz
            techScores.forEach(tech => {
                const priorityCell = document.getElementById(`priority_${tech.id}`);
                const rankCell = document.getElementById(`rank_${tech.id}`);

                if (priorityCell) priorityCell.textContent = tech.score;
                if (rankCell) rankCell.textContent = tech.rank;
            });
        }

        // Función auxiliar para obtener color según ranking
        function getRankColor(rank) {
            const colors = [
                '#e74c3c', // Rojo para rank 1
                '#f39c12', // Naranja para rank 2
                '#3498db', // Azul para rank 3
                '#2ecc71', // Verde para rank 4
                '#9b59b6', // Púrpura para rank 5
            ];
            return colors[Math.min(rank - 1, colors.length - 1)] || '#7f8c8d';
        }

        // Resetear todo
        function resetAll() {
            if (confirm("Are you sure you want to reset all data? This will delete all customer requirements, technical specifications, relationships, and correlations.")) {
                customerRequirements = [];
                technicalRequirements = [];
                relationships = {};
                correlations = {};

                renderCustomerRequirements();
                renderTechnicalSpecs();
                updateRelationshipControls();
                updateCorrelationControls();

                // Mostrar sección de generar y ocultar matriz
                document.getElementById('generate-section').style.display = 'block';
                document.getElementById('qfdMatrix').style.display = 'none';

                document.querySelector('#priorityTable tbody').innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 2rem; color: #777;">
                            <i class="fas fa-chart-bar" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                            <p>Priority rankings will appear here after generating the House of Quality matrix.</p>
                        </td>
                    </tr>
                `;

                showToast('All data has been reset.', 'info');
            }
        }

        // Cargar ejemplo - MODIFICADO PARA HACER SCROLL A INPUT DATA
        function loadExample() {
            customerRequirements = [
                { id: 'cr_1', text: "Easy to use", importance: 5 },
                { id: 'cr_2', text: "Durable and long-lasting", importance: 4 },
                { id: 'cr_3', text: "Lightweight and portable", importance: 3 },
                { id: 'cr_4', text: "Affordable price", importance: 4 },
                { id: 'cr_5', text: "Fast performance", importance: 5 },
                { id: 'cr_6', text: "Aesthetically pleasing design", importance: 3 }
            ];

            technicalRequirements = [
                { id: 'tr_1', text: "Weight (grams)" },
                { id: 'tr_2', text: "Material thickness (mm)" },
                { id: 'tr_3', text: "Number of components" },
                { id: 'tr_4', text: "Manufacturing cost ($)" },
                { id: 'tr_5', text: "Processing speed (GHz)" },
                { id: 'tr_6', text: "Surface finish quality" }
            ];

            relationships = {
                "cr_1_tr_3": "strong",
                "cr_1_tr_5": "medium",
                "cr_2_tr_2": "strong",
                "cr_2_tr_6": "medium",
                "cr_3_tr_1": "strong",
                "cr_3_tr_3": "medium",
                "cr_4_tr_4": "strong",
                "cr_4_tr_3": "weak",
                "cr_5_tr_5": "strong",
                "cr_5_tr_3": "weak",
                "cr_6_tr_6": "strong",
                "cr_6_tr_1": "weak"
            };

            correlations = {
                "tr_1_tr_4": "positive-strong",
                "tr_2_tr_4": "positive-weak",
                "tr_1_tr_3": "negative-strong",
                "tr_5_tr_4": "positive-strong",
                "tr_6_tr_4": "positive-weak"
            };

            renderCustomerRequirements();
            renderTechnicalSpecs();
            updateRelationshipControls();
            updateCorrelationControls();

            showToast('Example data loaded successfully! You can now generate the House of Quality matrix.', 'success');

            // CAMBIO 1: Cambiar a la pestaña Input Data y hacer scroll
            switchQfdTab('tab-input');
            switchInputTab('customer-needs');

            // Scroll suave al inicio de la pestaña Input Data
            setTimeout(() => {
                document.querySelector('.tabs-container').scrollIntoView({
                    behavior: 'smooth'
                });
            }, 100);
        }

        // Exportar a Excel
        function exportToExcel() {
            const finalTable = document.getElementById('qfdFinalTable');
            if (!finalTable) {
                showToast('Please generate the House of Quality matrix first.', 'info');
                switchQfdTab('tab-input');
                return;
            }

            const wb = XLSX.utils.book_new();
            const ws = XLSX.utils.table_to_sheet(finalTable);
            ws['!cols'] = [{ wch: 30 }, { wch: 10 }].concat(technicalRequirements.map(() => ({ wch: 15 })));
            XLSX.utils.book_append_sheet(wb, ws, 'QFD Matrix');

            const priorityData = [["Technical Requirement", "Priority Score", "Rank"]];
            const techScores = calculatePrioritiesForExport();
            techScores.forEach(t => priorityData.push([t.text, t.score, t.rank]));

            const ws_priority = XLSX.utils.aoa_to_sheet(priorityData);
            ws_priority['!cols'] = [{ wch: 30 }, { wch: 15 }, { wch: 10 }];
            XLSX.utils.book_append_sheet(wb, ws_priority, 'Priorities');

            XLSX.writeFile(wb, `QFD_Analysis_${new Date().toISOString().slice(0, 10)}.xlsx`);
            showToast('Excel file exported successfully!', 'success');
        }

        // Calcular prioridades para exportación
        function calculatePrioritiesForExport() {
            const relValues = { strong: 9, medium: 3, weak: 1 };

            const techScores = technicalRequirements.map(tr => {
                const score = customerRequirements.reduce((sum, cr) => {
                    const relValue = relValues[relationships[`${cr.id}_${tr.id}`]] || 0;
                    return sum + (cr.importance * relValue);
                }, 0);

                return {
                    id: tr.id,
                    text: tr.text,
                    score: score
                };
            }).sort((a, b) => b.score - a.score);

            let rank = 0;
            let lastScore = -1;
            techScores.forEach((tech, i) => {
                if (tech.score !== lastScore) {
                    rank = i + 1;
                    lastScore = tech.score;
                }
                tech.rank = rank;
            });

            return techScores;
        }

        // Mostrar notificación toast
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast-notification');
            toast.textContent = message;
            toast.className = 'show ' + type;

            setTimeout(() => {
                toast.className = toast.className.replace('show', '');
            }, 3000);
        }
    </script>

    <script defer>
        document.addEventListener('DOMContentLoaded', () => {
            // --- CÓDIGO DEL SONIDO DE HOVER ---
            const hoverSound = new Audio('data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABgAZGF0YQQAAAAAAAC/AAABAAAA//8AAnIseAABAHwAAU5/AABXfgAAS34AAEd+AABJfgAATX4AAFV+AABXfgAAVH4AAFN+AABTfgAAS34AAE9+AABVfgAAUX4AAEN+AABAfQAAP30AAD59AAA/fQAAQ30AAEd9AABLfQAAUn0AAGB9AABsfQAAe30AAH59AACAfQAAf30AAHx9AAB1fQAAcX0AAHN9AAB1fQAAdX0AAHJ9AABxPQAAeD4AAHc/AAB2PwAAcj8AAHI/AABxPwAAcT8AAHE/AABwPwAAcD8AAHA/AABvPwAAcD8AAHA/AABvPwAAaz0AAG4/AABsPwAAZj8AAGQ/AABiPwAAZD8AAGI/AABhPwAAYT8AAGI/AABiPwAAYT8AAGM/AABlPwAAaD8AAGs/AABuPwAAbj8AAG0/AABsPwAAbD8AAGs/AABoPwAAZD8AAGM/AABkPwAAZz8AAGg/AABrPwAAbT8AAHA/AABzPwAAcz8AAHM/AABzPwAAcT8AAHE/AABxPwAAcD8AAHA/AABwPwAAbj8AAGs/AABpPwAAaD8AAGc/AABhPwAAYD8AAF8/AABePwAAXT8AAFw/AABbPwAAWj8AAFk/AABYPwAAWj8AAFk/AABZPwAAWT8AAFk/AABYPwAAVT8AAFI/AABPPwAATD8AAEk/AABGPwAAQz8AAEA/AAA+PwAAO/8AADf8AAA1/AAANfwAADX8AAA1/AAANfwAADX8AAA2/AAAN/wAADf8AAA3/AAAN/wAADf8AAA3/AAAN/wAADj8AAA4/AAAOPwAADj8AAA4/AAAOPwAADj8AAA4/AAAN/wAADf8AAA3/AAAN/wAADf8AAA3/AAAN/wAADf8AAA3/AAAN/wAADf8AAA3/AAAN/wAADf8AAA3/AA');
            hoverSound.preload = 'auto';
            let audioUnlocked = false;

            function unlockAudio() {
                if (audioUnlocked) return;
                hoverSound.volume = 0;
                hoverSound.play().then(() => {
                    hoverSound.pause();
                    hoverSound.currentTime = 0;
                    hoverSound.volume = 1;
                    audioUnlocked = true;
                    document.removeEventListener('click', unlockAudio);
                    document.removeEventListener('touchstart', unlockAudio);
                }).catch(e => { });
            }

            document.addEventListener('click', unlockAudio);
            document.addEventListener('touchstart', unlockAudio);

            const featureCards = document.querySelectorAll('.feature-card');
            featureCards.forEach(card => {
                card.addEventListener('mouseenter', () => {
                    if (audioUnlocked) {
                        hoverSound.currentTime = 0;
                        hoverSound.play().catch(e => { });
                    }
                });
            });
        });
    </script>

    <script src="dexie.min.js"></script>
    <script src="db-sigma.js"></script>

</body>

</html>