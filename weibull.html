<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="canonical" href="https://sigmaexacta.com/weibull" />
  <title>Weibull Analysis for Failure Prediction | Sigma Exacta</title>
  <meta name="description"
    content="Free online Weibull analysis tool to predict failures. Enter your time-to-failure data to calculate Weibull parameters (Beta β, Eta η), Mean Time To Failure (MTTF), and visualize the results on a probability plot. An essential tool for reliability engineering and maintenance planning.">
  <meta name="keywords"
    content="Open Source, free Solftware, SigmaExacta Weibull analysis, Weibull calculator, failure prediction, reliability engineering, mttf, beta, eta, probability plot, maintenance, life data analysis, Mean Time to Failure">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
    integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"
    integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8"
    crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
    integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body, {
              delimiters: [
                  {left: '$$', right: '$$', display: true},
                  {left: '$', right: '$', display: false},
                  {left: '\\(', right: '\\)', display: false},
                  {left: '\\[', right: '\\]', display: true}
              ],
              throwOnError: false
            });"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="icon" href="sigma-exacta-icon.jpg" type="image/jpeg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css">
  <style>
    /* Estilos específicos para la página de Weibull */
    :root {
      --primary-color: #2c3e50;
      --secondary-color: #3498db;
      --accent-color: #e74c3c;
      --light-color: #ecf0f1;
      --dark-color: #2c3e50;
      --success-color: #2ecc71;
      font-size: 16px;
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Nunito', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      color: #333;
      background-color: #f5f7fa;
      line-height: 1.6;
    }

    img,
    canvas {
      max-width: 100%;
      height: auto;
    }

    /* --- CAMBIO: Ancho completo --- */
    .main-content-wrapper {
      max-width: 98%;
      /* Ocupa casi toda la pantalla */
      width: 98%;
      margin: 20px auto;
      padding: 1rem;
    }

    .main-header {
      text-align: center;
      padding: 1rem 0;
      margin-bottom: 1.25rem;
      border-bottom: 1px solid #ddd;
    }

    .main-header h1 {
      color: var(--primary-color);
      font-size: clamp(1.5rem, 4vw, 1.8rem);
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
      font-weight: 800;
    }

    .main-header p {
      color: #7f8c8d;
      font-weight: 400;
      font-size: 1.1rem;
      max-width: 700px;
      margin: 0 auto;
    }

    /* --- BOTONES PRINCIPALES SOBRE LAS TABS --- */
    .main-action-buttons {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin: 1.5rem auto;
      flex-wrap: wrap;
      max-width: 100%;
    }

    .main-action-buttons button {
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
    }

    .main-action-buttons .btn-example {
      background-color: var(--success-color);
      color: white;
    }

    .main-action-buttons .btn-example:hover {
      background-color: #27ad60;
      transform: translateY(-2px);
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15);
    }

    .main-action-buttons .btn-reset {
      background-color: var(--accent-color);
      color: white;
    }

    .main-action-buttons .btn-reset:hover {
      background-color: #c0392b;
      transform: translateY(-2px);
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15);
    }

    /* ===== ESTILOS DEL SISTEMA DE PESTAÑAS (WIZARD) ===== */
    .tabs-nav {
      display: flex;
      background-color: #f1f5f9;
      border-radius: 8px 8px 0 0;
      overflow-x: auto;
      border-bottom: 2px solid var(--secondary-color);
      margin-bottom: 0;
      margin-top: 0.5rem;
      scrollbar-width: none;
      -ms-overflow-style: none;
      width: 100%;
    }

    .tabs-nav::-webkit-scrollbar {
      display: none;
    }

    .tab-btn {
      padding: 1rem 1.5rem;
      border: none;
      background: none;
      cursor: pointer;
      font-weight: 700;
      color: #64748b;
      white-space: nowrap;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      transition: all 0.3s;
      border-bottom: 3px solid transparent;
      font-family: 'Nunito', sans-serif;
      font-size: 1rem;
      flex: 1;
      min-width: 0;
      text-align: center;
    }

    @media (min-width: 768px) {
      .tab-btn {
        padding: 1rem 0.5rem;
      }
    }

    .tab-btn:hover {
      background-color: #e2e8f0;
      color: var(--primary-color);
    }

    .tab-btn.active {
      background-color: #fff;
      color: var(--secondary-color);
      border-bottom-color: var(--secondary-color);
      border-radius: 8px 8px 0 0;
      margin-bottom: -2px;
      border-left: 1px solid #e1e5e9;
      border-right: 1px solid #e1e5e9;
      border-top: 1px solid #e1e5e9;
    }

    /* --- CAMBIO: Ancho completo en contenido de tabs --- */
    .wizard-tab-content {
      display: none;
      padding: 2rem;
      background: #fff;
      border: 1px solid #e1e5e9;
      border-top: none;
      border-radius: 0 0 8px 8px;
      animation: fadeIn 0.3s ease;
      margin-bottom: 2rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      width: 100%;
      /* Asegura ancho completo */
    }

    .wizard-tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(5px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .tab-nav-buttons {
      display: flex;
      justify-content: flex-end;
      margin-top: 2rem;
      padding-top: 1rem;
      border-top: 1px solid #eee;
      width: 100%;
    }

    .btn-next-tab {
      background-color: var(--secondary-color);
      color: white;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.7rem 1.25rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      font-family: 'Nunito', sans-serif;
      transition: background-color 0.3s, transform 0.2s;
    }

    .btn-next-tab:hover {
      background-color: #2980b9;
      transform: translateY(-2px);
    }

    /* --- CAMBIO: Ancho completo para Containers --- */
    .container {
      background-color: white;
      border-radius: 8px;
      padding: 1.5rem;
      margin-top: 1.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      width: 100%;
      /* Full width */
      max-width: 100%;
    }

    .container h2 {
      color: var(--primary-color);
      margin-top: 0;
      border-bottom: 2px solid var(--secondary-color);
      padding-bottom: 0.6rem;
      font-weight: 800;
    }

    .container p,
    .container ol,
    .container ul {
      line-height: 1.8;
    }

    .container ol,
    .container ul {
      padding-left: 1.25rem;
    }

    /* ESTILOS CALCULATOR & RESULTS */
    .calculator-section {
      margin-top: 0;
      width: 100%;
    }

    .calculation-block {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 1.25rem;
      background-color: white;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      width: 100%;
    }

    .calculation-title {
      font-weight: 800;
      font-size: 1.2em;
      margin-bottom: 1rem;
      color: var(--primary-color);
      border-bottom: 1px solid #eee;
      padding-bottom: 0.6rem;
    }

    label {
      display: block;
      margin-bottom: 0.6rem;
      color: var(--primary-color);
      font-weight: 600;
    }

    input[type="text"],
    textarea {
      width: 100%;
      padding: 0.6rem;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 1rem;
      margin-bottom: 1rem;
      box-sizing: border-box;
      transition: border 0.3s, box-shadow 0.3s;
      font-family: 'Nunito', sans-serif;
    }

    input[type="text"]:focus,
    textarea:focus,
    button:focus-visible {
      outline: none;
      border-color: var(--secondary-color);
      box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.3);
    }

    textarea {
      resize: vertical;
      overflow-y: hidden;
      min-height: 80px;
    }

    button {
      background-color: var(--secondary-color);
      color: white;
      padding: 0.7rem 1.25rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin: 5px;
      font-size: 1rem;
      transition: background-color 0.3s, box-shadow 0.3s;
      font-weight: 600;
      font-family: 'Nunito', sans-serif;
    }

    button:hover {
      background-color: #2980b9;
    }

    button:disabled {
      background-color: #95a5a6;
      cursor: not-allowed;
    }

    .btn-success {
      background-color: var(--success-color);
    }

    .btn-success:hover {
      background-color: #27ae60;
    }

    .btn-reset {
      background-color: #e74c3c;
    }

    .btn-reset:hover {
      background-color: #c0392b;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }

    .results-container {
      display: flex;
      flex-wrap: wrap;
      gap: 1.25rem;
      align-items: flex-start;
      margin-top: 1.25rem;
      width: 100%;
      min-height: 450px;
    }

    #weibullChartContainer {
      background: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 1rem;
      flex: 1;
      min-width: 300px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      min-height: 420px;
    }

    .chart-watermark {
      display: block;
      filter: invert(1);
      width: 85px;
      height: auto;
      flex-shrink: 0;
    }

    .canvas-wrapper {
      flex-grow: 1;
      position: relative;
      height: 400px;
      min-width: 0;
    }

    #results {
      background: white;
      padding: 1.25rem;
      border-radius: 8px;
      border: 1px solid #ddd;
      min-width: 300px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      flex: 1;
      display: block;
      opacity: 0.7;
      background-color: #f9f9f9;
    }

    .results-visible {
      opacity: 1;
      background-color: white;
    }

    #results p {
      margin-bottom: 0.75rem;
      color: var(--primary-color);
    }

    .result-value {
      font-weight: bold;
      color: var(--dark-color);
    }

    /* ESTILOS FÓRMULAS */
    .formula-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      text-align: center;
      margin-top: 1.5rem;
    }

    .formula-item {
      padding: 1.5rem 1rem;
      border: 1px solid #eee;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 120px;
      font-size: 1.1em;
    }

    .formula-item h3 {
      margin-top: 0;
      margin-bottom: 1rem;
      color: var(--primary-color);
    }

    .legend {
      margin-top: 2rem;
      padding: 1rem;
      border: 1px solid #eee;
      border-radius: 8px;
      background-color: #fdfdfd;
    }

    .legend h3 {
      margin-top: 0;
      color: var(--primary-color);
    }

    .legend ul {
      list-style: none;
      padding: 0;
    }

    .legend li {
      margin-bottom: 0.5rem;
    }

    .legend code {
      background-color: #eee;
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: 600;
    }

    /* ESTILOS COMUNES */
    footer {
      padding: 2rem 1.25rem;
      text-align: center;
    }

    .disclaimer-note {
      margin-top: 2rem;
      padding: 0 1rem;
      font-size: 0.8rem;
      color: #777;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    #aggregatedResultsContainer {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      margin-top: 1rem;
      width: 100%;
    }

    .result-card {
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 1rem;
      background-color: #fdfdfd;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
    }

    .result-card-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding-bottom: 0.75rem;
      margin-bottom: 0.75rem;
      border-bottom: 1px solid #eee;
    }

    .result-card-icon {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      object-fit: cover;
    }

    .result-card-title {
      font-weight: 600;
      color: var(--primary-color);
      font-size: 1.1rem;
    }

    .result-card-body {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
    }

    .result-card-item {
      padding: 0.5rem;
      background-color: #f5f7fa;
      border-radius: 4px;
      border: 1px solid #e9ecef;
    }

    .result-card-item strong {
      display: block;
      font-size: 0.9rem;
      color: #7f8c8d;
      margin-bottom: 0.25rem;
    }

    .result-card-item span {
      font-weight: 600;
      color: var(--dark-color);
    }

    .result-card-item .failure-data {
      font-size: 0.9rem;
      white-space: pre-wrap;
      word-break: break-all;
      max-height: 100px;
      overflow-y: auto;
      background: #e9ecef;
      padding: 8px;
      border-radius: 3px;
      margin-top: 5px;
    }

    /* RESPONSIVE ADJUSTMENTS */
    @media (max-width: 768px) {
      .results-container {
        flex-direction: column;
        min-height: auto;
      }

      #results,
      #weibullChartContainer {
        width: 100%;
        min-width: unset;
      }

      .main-content-wrapper {
        margin-top: 10px;
        padding: 1rem;
        width: 100%;
        /* Ensure full width on mobile */
      }

      .formula-grid {
        grid-template-columns: 1fr;
      }

      .katex {
        font-size: 0.9rem !important;
      }

      .wizard-tab-content {
        padding: 1rem;
      }

      .tab-btn {
        padding: 0.8rem 0.5rem;
        font-size: 0.9rem;
      }

      .container,
      .calculation-block {
        padding: 1rem;
      }

      .tabs-nav {
        margin-left: -1rem;
        margin-right: -1rem;
        width: calc(100% + 2rem);
        border-radius: 0;
        padding: 0 1rem;
      }

      .main-action-buttons {
        gap: 0.75rem;
        margin: 1rem auto;
      }

      .main-action-buttons button {
        padding: 0.7rem 1.2rem;
        font-size: 0.9rem;
      }
    }

    @media (max-width: 480px) {
      body {
        line-height: 1.5;
      }

      .container,
      .calculation-block {
        padding: 0.8rem;
      }

      .tab-btn {
        padding: 0.6rem 0.3rem;
        font-size: 0.8rem;
        gap: 0.25rem;
      }

      .tab-btn i {
        font-size: 0.9rem;
      }

      .main-header h1 {
        font-size: 1.4rem;
      }

      .main-header p {
        font-size: 1rem;
      }

      .tabs-nav {
        margin-left: -0.8rem;
        margin-right: -0.8rem;
        width: calc(100% + 1.6rem);
      }

      .main-action-buttons {
        flex-direction: column;
        align-items: stretch;
        gap: 0.5rem;
      }

      .main-action-buttons button {
        width: 100%;
        justify-content: center;
      }
    }

    /* --- MEDIA QUERIES Ajustados para Full Width --- */
    @media (min-width: 1200px) {
      .main-content-wrapper {
        max-width: 98%;
        /* Forzar full width incluso en pantallas grandes */
        padding: 1.5rem 2rem;
      }

      .tab-btn {
        padding: 1rem 1rem;
        font-size: 1.1rem;
      }

      /* Asegurar que el contenido interno se expanda */
      #tab-tool .container,
      #tab-formulas .container,
      #tab-results .container {
        max-width: 100%;
        margin-left: 0;
        margin-right: 0;
      }

      #weibullChartContainer,
      #results {
        max-width: none;
      }
    }

    @media (min-width: 992px) {
      .results-container {
        flex-wrap: nowrap;
      }

      #weibullChartContainer {
        flex: 2;
      }

      #results {
        flex: 1;
        max-width: 400px;
      }

      .formula-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
  </style>
</head>

<body>

  <div id="header-container"></div>

  <noscript>
    <nav>
      <a href="/">Home</a> |
      <a href="/8d">8D Tool</a> |
      <a href="/taguchi_doe">Taguchi DOE</a> |
      <a href="/swot">SWOT Analysis</a> |
      <a href="/balancedcard">Balanced Scorecard</a> |
      <a href="/qfd">QFD</a> |
      <a href="/apqp-ppap">APQP/PPAP</a> |
      <a href="/ishikawa">Ishikawa</a> |
      <a href="/fmea">FMEA</a> |
      <a href="/vave">VAVE</a> |
      <a href="/eisenhower">Eisenhower Matrix</a> |
      <a href="/triz">TRIZ</a> |
      <a href="/weibull">Weibull</a> |
      <a href="/stack_up_analysis">Tolerance Stack-Up</a> |
      <a href="/pdca">PDCA</a> |
      <a href="/design_thinking">Design Thinking</a> |
      <a href="/pugh">Pugh Matrix</a> |
      <a href="/cpk_calculator">CpK Calculator</a> |
      <a href="/control-plan">Control Plan</a>
    </nav>
  </noscript>

  <main class="main-content-wrapper">
    <header class="main-header">
      <h1><span
          style="display: inline-flex; justify-content: center; align-items: center; width: 42px; height: 42px; background-color: #ff2d55; border-radius: 8px; margin-right: 12px; vertical-align: middle;"><i
            class="fas fa-chart-area" style="color: white; font-size: 22px;"></i></span> Free Online Weibull Analysis
        for Failure Prediction</h1>
      <p>Estimate reliability and predict failures using the Weibull distribution.</p>
    </header>

    <div class="main-action-buttons">
      <button id="globalLoadExampleBtn" class="btn-example">
        <i class="fas fa-play-circle"></i> Load Example
      </button>
      <button id="globalResetBtn" class="btn-reset">
        <i class="fas fa-sync-alt"></i> Reset All
      </button>
    </div>

    <nav class="tabs-nav">
      <button class="tab-btn active" onclick="switchWizardTab('tab-theory')"><i class="fas fa-book"></i> Theory &
        Info</button>
      <button class="tab-btn" onclick="switchWizardTab('tab-tool')"><i class="fas fa-calculator"></i> Calculator
        Tool</button>
      <button class="tab-btn" onclick="switchWizardTab('tab-results')"><i class="fas fa-chart-line"></i>
        Results</button>
      <button class="tab-btn" onclick="switchWizardTab('tab-formulas')"><i class="fas fa-square-root-alt"></i>
        Formulas</button>
    </nav>

    <div id="tab-theory" class="wizard-tab-content active">
      <div class="container">
        <h2><i class="fas fa-question-circle"></i> What is Weibull Analysis?</h2>
        <p><strong>Weibull Analysis</strong> is a powerful statistical method used in reliability engineering to model
          time-to-failure data. It is highly versatile and can model the failure characteristics of complex systems,
          from
          infant mortality to wear-out failures.</p>
        <p>The analysis yields two key parameters:</p>
        <ul>
          <li><strong>Beta (β) - The Shape Parameter:</strong> Describes the failure mode.
            <ul>
              <li><strong>β &lt; 1:</strong> Decreasing failure rate (infant mortality). Failures are more likely at the
                beginning.</li>
              <li><strong>β = 1:</strong> Constant failure rate (random failures). The process follows an exponential
                distribution.</li>
              <li><strong>β &gt; 1:</strong> Increasing failure rate (wear-out). Failures become more likely as the
                product ages.</li>
            </ul>
          </li>
          <li><strong>Eta (η) - The Scale Parameter:</strong> Also known as the characteristic life. It's the time at
            which <strong>63.2%</strong> of the population is expected to have failed.</li>
        </ul>
      </div>

      <div class="container">
        <h2><i class="fas fa-tools"></i> Why is Weibull Analysis Useful?</h2>
        <p>Originally developed by Waloddi Weibull to model material strength, this analysis is now a cornerstone of
          modern reliability engineering. It allows engineers and managers to make data-driven decisions about:</p>
        <ul>
          <li><strong>Maintenance Planning:</strong> Predict when parts are likely to fail to schedule preventive
            maintenance.</li>
          <li><strong>Warranty Analysis:</strong> Forecast warranty claims and costs.</li>
          <li>
          <li><strong>Design Improvement:</strong> Identify failure modes (e.g., wear-out vs. early failures) to guide
            product improvements.</li>
          <li><strong>Risk Assessment:</strong> Quantify the reliability of a component or system over its operational
            life.</li>
        </ul>
      </div>

      <div class="container">
        <h2><i class="fas fa-history"></i> History & Origin</h2>
        <p>The Weibull distribution was first described by Swedish engineer and mathematician <strong>Waloddi
            Weibull</strong> in 1937. Initially developed to model material strength and fatigue life, Weibull presented
          his distribution to the American Society of Mechanical Engineers in 1951 in a famous paper titled "A
          Statistical
          Distribution Function of Wide Applicability."</p>
        <p>What made Weibull's approach revolutionary was its flexibility to model various failure patterns through its
          shape parameter (β). Unlike the normal distribution, which assumes symmetrical variation around a mean, the
          Weibull distribution can effectively model:</p>
        <ul>
          <li><strong>Infant Mortality</strong> (β < 1): Early failures due to manufacturing defects</li>
          <li><strong>Random Failures</strong> (β = 1): Constant failure rate, equivalent to exponential distribution
          </li>
          <li><strong>Wear-Out Failures</strong> (β > 1): Age-related failures that increase over time</li>
        </ul>
        <p>This versatility made Weibull analysis particularly valuable in reliability engineering, maintenance
          planning,
          and failure analysis across industries from aerospace to manufacturing.</p>
      </div>

      <div class="container">
        <h2><i class="fas fa-cogs"></i> How to Use This Tool</h2>
        <ol>
          <li><strong>Enter Failure Data:</strong> In the first field, type the times at which failures occurred,
            separated by commas. These can be hours, cycles, kilometers, etc. You can also press "Load Example" to see a
            sample dataset.</li>
          <li><strong>Analyze:</strong> Press the "Analyze Failures" button.</li>
          <li><strong>Review Results:</strong>
            <ul style="margin-top: 10px; list-style-type: circle;">
              <li><strong>Numerical Results:</strong> Review the calculated Beta (β), Eta (η), and Mean Time To Failure
                (MTTF). Interpret the Beta value to understand the failure mode of your system.</li>
              <li><strong>Weibull Probability Plot:</strong> This special chart visualizes your failure data. If the
                points form a reasonably straight line, it confirms that the Weibull distribution is a good fit for your
                data. The blue line is the best-fit regression line used to calculate the parameters.</li>
              <li><strong>Make a Prediction (Optional):</strong> Enter a specific time (in the same units as your
                failure
                data) into the prediction field and press "Analyze Failures" again to see the cumulative probability of
                failure by that time.</li>
              <li><strong>Add and Export:</strong> You can add multiple analyses to a list and then export all results
                to
                an Excel file for your reports.</li>
            </ul>
          </li>
        </ol>
      </div>

      <div class="tab-nav-buttons">
        <button class="btn-next-tab" onclick="switchWizardTab('tab-tool')">Go to Calculator <i
            class="fas fa-arrow-right"></i></button>
      </div>
    </div>

    <div id="tab-tool" class="wizard-tab-content">
      <div class="calculator-section">
        <div class="calculation-block">
          <div class="calculation-title">Weibull Analysis Calculator</div>
          <form id="weibullForm">
            <label for="failureTimes"><i class="fas fa-clock"></i> Times to Failure (comma-separated):</label>
            <textarea id="failureTimes" rows="1" placeholder="Example: 1500, 2350, 1820, 2100" required></textarea>

            <label for="predictTime"><i class="fas fa-bullseye"></i> Predict Probability of Failure by Time
              (Optional):</label>
            <input type="text" id="predictTime" placeholder="e.g., 2000" />

            <div class="button-group">
              <button type="submit"><i class="fas fa-calculator"></i> Analyze Failures</button>
            </div>
          </form>
        </div>
      </div>
      <div class="container" style="margin-top:0;">
        <p><i class="fas fa-info-circle" style="color: var(--secondary-color);"></i> Once you click "Analyze Failures",
          you will be automatically redirected to the <strong>Results</strong> tab to see the chart and parameters.</p>
      </div>

      <div class="tab-nav-buttons">
        <button class="btn-next-tab" onclick="switchWizardTab('tab-results')">Go to Results <i
            class="fas fa-arrow-right"></i></button>
      </div>
    </div>

    <div id="tab-results" class="wizard-tab-content">
      <div class="calculator-section">
        <div class="results-container">
          <div id="results">
            <div class="calculation-title">Results</div>
            <p><i class="fas fa-shapes"></i> Shape Parameter (β): <span id="beta" class="result-value">-</span></p>
            <p><i class="fas fa-ruler-horizontal"></i> Scale Parameter / Characteristic Life (η): <span id="eta"
                class="result-value">-</span></p>
            <p><i class="fas fa-stopwatch"></i> Mean Time To Failure (MTTF): <span id="mttf"
                class="result-value">-</span>
            </p>
            <hr style="border: 1px solid #eee; margin: 1rem 0;">
            <p id="predictionResult">
              <i class="fas fa-chart-pie"></i> Probability of failure by time <span id="timeForPrediction"
                class="result-value">-</span>: <span id="failureProbability" class="result-value">-</span>%
            </p>

            <button type="button" id="addBtn" disabled><i class="fas fa-plus"></i> Add to List</button>
          </div>

          <div id="weibullChartContainer">
            <img src="sigma-exacta-icon.jpg" alt="Sigma Exacta Watermark" class="chart-watermark">
            <div class="canvas-wrapper">
              <canvas id="weibullChartCanvas"></canvas>
            </div>
          </div>
        </div>

        <div class="calculation-block">
          <div class="calculation-title">Aggregated Results</div>
          <div id="aggregatedResultsContainer">
          </div>
          <button id="exportBtn" style="margin-top: 10px;"><i class="fas fa-file-excel"></i> Export to Excel</button>
        </div>
      </div>

      <div class="tab-nav-buttons">
        <button class="btn-next-tab" onclick="switchWizardTab('tab-formulas')">View Formulas <i
            class="fas fa-arrow-right"></i></button>
      </div>
    </div>

    <div id="tab-formulas" class="wizard-tab-content">
      <div class="container">
        <h2><i class="fas fa-calculator"></i> Mathematical Formulas</h2>
        <div class="formula-grid">
          <div class="formula-item">
            <h3>Weibull Probability Density Function (PDF)</h3>
            <div style="font-size: 1rem;">$$ f(t) = \frac{\beta}{\eta} \left( \frac{t}{\eta} \right)^{\beta-1}
              e^{-\left(
              \frac{t}{\eta} \right)^{\beta}} $$</div>
            <p>Where $t$ is time, $\beta$ is the shape parameter, and $\eta$ is the scale parameter.</p>
          </div>
          <div class="formula-item">
            <h3>Cumulative Distribution Function (CDF)</h3>
            <div style="font-size: 1rem;">$$ F(t) = 1 - e^{-\left( \frac{t}{\eta} \right)^{\beta}} $$</div>
            <p>Probability of failure by time $t$.</p>
          </div>
          <div class="formula-item">
            <h3>Reliability Function</h3>
            <div style="font-size: 1rem;">$$ R(t) = e^{-\left( \frac{t}{\eta} \right)^{\beta}} $$</div>
            <p>Probability of survival beyond time $t$.</p>
          </div>
          <div class="formula-item">
            <h3>Mean Time To Failure (MTTF)</h3>
            <div style="font-size: 1rem;">$$ MTTF = \eta \cdot \Gamma\left(1 + \frac{1}{\beta}\right) $$</div>
            <p>Where $\Gamma$ is the Gamma function.</p>
          </div>
          <div class="formula-item">
            <h3>Failure Rate (Hazard Function)</h3>
            <div style="font-size: 1rem;">$$ h(t) = \frac{\beta}{\eta} \left( \frac{t}{\eta} \right)^{\beta-1} $$</div>
            <p>Instantaneous failure rate at time $t$.</p>
          </div>
          <div class="formula-item">
            <h3>Median Life</h3>
            <div style="font-size: 1rem;">$$ t_{0.5} = \eta (\ln 2)^{1/\beta} $$</div>
            <p>Time when 50% of units have failed.</p>
          </div>
        </div>
        <div class="legend">
          <h3>Weibull Parameters Legend</h3>
          <ul>
            <li><code>β (Beta)</code>: Shape parameter - determines failure pattern</li>
            <li><code>η (Eta)</code>: Scale parameter - characteristic life (63.2% failure point)</li>
            <li><code>t</code>: Time or cycles</li>
            <li><code>Γ</code>: Gamma function</li>
            <li><code>f(t)</code>: Probability density at time t</li>
            <li><code>F(t)</code>: Cumulative probability of failure by time t</li>
            <li><code>R(t)</code>: Reliability (survival probability) at time t</li>
            <li><code>h(t)</code>: Failure rate at time t</li>
          </ul>
        </div>
      </div>
    </div>
  </main>
  <footer>
    <div class="disclaimer-note">
      <p><strong>Disclaimer:</strong> The tools and information provided on Sigma Exacta are for informational and
        educational purposes only. This tool is based on established methodologies in reliability engineering. The tools
        on this site are independent implementations and are not affiliated with, sponsored by, or endorsed by the
        original creators of these methodologies. While we strive for accuracy, we make no warranty or guarantee
        regarding the results. All engineering, maintenance, and business decisions based on the output of this tool are
        the sole responsibility of the user. Sigma Exacta and its creators are not liable for any damages or losses
        resulting from the use of this website.</p>
    </div>
  </footer>
  <script>
    // Script para funcionalidad de Tabs Wizard
    function switchWizardTab(tabId) {
      // Quitar clase active de todos los botones y contenidos de wizard
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.wizard-tab-content').forEach(content => content.classList.remove('active'));

      // Activar el contenido seleccionado
      const tabContent = document.getElementById(tabId);
      tabContent.classList.add('active');

      // Activar botón correspondiente
      const activeBtn = document.querySelector(`button[onclick="switchWizardTab('${tabId}')"]`);
      if (activeBtn) activeBtn.classList.add('active');

      // Forzar el renderizado de fórmulas matemáticas cuando se cambia a la pestaña de fórmulas
      if (tabId === 'tab-formulas' && typeof renderMathInElement === 'function') {
        setTimeout(() => {
          renderMathInElement(tabContent, {
            delimiters: [
              { left: '$$', right: '$$', display: true },
              { left: '$', right: '$', display: false },
              { left: '\\(', right: '\\)', display: false },
              { left: '\\[', right: '\\]', display: true }
            ],
            throwOnError: false
          });
        }, 100);
      }

      // Scroll al top suavemente
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Cargar el header desde el archivo externo
    fetch('header.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('header-container').innerHTML = data;

        // Inicializar la funcionalidad del menú después de cargar el header
        const navToggle = document.getElementById('nav-toggle');
        const navMenu = document.getElementById('nav-menu');
        const toolsDropdownToggle = document.getElementById('tools-dropdown-toggle');
        const toolsDropdownMenu = document.getElementById('tools-dropdown-menu');
        const toolsDropdownContainer = document.getElementById('tools-dropdown-container');

        if (navToggle && navMenu) {
          navToggle.addEventListener('click', () => {
            navMenu.classList.toggle('show-menu');
            const icon = navToggle.querySelector('i');
            icon.classList.toggle('fa-bars');
            icon.classList.toggle('fa-times');

            if (!navMenu.classList.contains('show-menu')) {
              toolsDropdownMenu.classList.remove('show-submenu');
              toolsDropdownContainer.classList.remove('active');
            }
          });
        }

        if (toolsDropdownToggle && toolsDropdownMenu && toolsDropdownContainer) {
          toolsDropdownToggle.addEventListener('click', (event) => {
            if (window.innerWidth <= 992) {
              event.preventDefault();
              toolsDropdownMenu.classList.toggle('show-submenu');
              toolsDropdownContainer.classList.toggle('active');
            }
          });
        }
      })
      .catch(error => console.error('Error loading header:', error));

    // --- CÓDIGO DE LA CALCULADORA WEIBULL ---

    let chart;
    let lastResult = null;
    let aggregatedResultsData = [];
    let calculationCounter = 1;

    // Lanczos approximation for the Gamma function
    function gamma(z) {
      const g = 7;
      const p = [0.99999999999980993, 676.5203681218851, -1259.1392167224028, 771.32342877765313, -176.61502916214059, 12.507343278686905, -0.13857109526572012, 9.9843695780195716e-6, 1.5056327351493116e-7];
      if (z < 0.5) {
        return Math.PI / (Math.sin(Math.PI * z) * gamma(1 - z));
      }
      z -= 1;
      let x = p[0];
      for (let i = 1; i < g + 2; i++) {
        x += p[i] / (z + i);
      }
      const t = z + g + 0.5;
      return Math.sqrt(2 * Math.PI) * Math.pow(t, z + 0.5) * Math.exp(-t) * x;
    }

    // Inicializar el gráfico vacío al cargar la página
    function initializeEmptyChart() {
      const ctx = document.getElementById("weibullChartCanvas").getContext("2d");
      chart = new Chart(ctx, {
        type: "scatter",
        data: {
          datasets: []
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            x: {
              type: "logarithmic",
              title: { display: true, text: "Time to Failure (Log Scale)" },
              grid: { color: "rgba(0, 0, 0, 0.05)" }
            },
            y: {
              type: "linear",
              title: { display: true, text: "ln(ln(1/(1-F(t))))" },
              grid: { color: "rgba(0, 0, 0, 0.05)" }
            }
          },
          plugins: {
            legend: { position: "top" },
            tooltip: {
              callbacks: {
                label: function (context) {
                  let label = context.dataset.label || '';
                  if (label) {
                    label += ': ';
                  }
                  if (context.parsed.x !== null) {
                    label += `Time = ${context.parsed.x.toFixed(2)}`;
                  }
                  return label;
                }
              }
            }
          }
        }
      });
    }

    // Llamar a la inicialización del gráfico cuando se carga la página
    document.addEventListener('DOMContentLoaded', function () {
      initializeEmptyChart();

      // Ajustar altura del textarea al cargar la página
      const failureTimesTextarea = document.getElementById('failureTimes');
      failureTimesTextarea.style.height = 'auto';
      failureTimesTextarea.style.height = (failureTimesTextarea.scrollHeight) + 'px';

      // NUEVO: Configurar botones globales (LOAD EXAMPLE ACTUALIZADO)
      document.getElementById('globalLoadExampleBtn').addEventListener('click', function () {
        const exampleData = '1500, 2350, 1820, 2100, 2500, 1980, 2700';
        const failureTimesTextarea = document.getElementById('failureTimes');
        failureTimesTextarea.value = exampleData;
        failureTimesTextarea.dispatchEvent(new Event('input', { bubbles: true }));

        // Scroll a la pestaña Calculator Tool
        switchWizardTab('tab-tool');

        // Opcional: Ejecutar automáticamente el análisis
        // setTimeout(() => {
        //   calculateWeibull();
        // }, 100);
      });

      // NUEVO: Configurar botón de reset global
      document.getElementById('globalResetBtn').addEventListener('click', function () {
        // Limpiar campos de entrada
        document.getElementById('failureTimes').value = '';
        document.getElementById('predictTime').value = '';

        // Ajustar altura del textarea
        const failureTimesTextarea = document.getElementById('failureTimes');
        failureTimesTextarea.style.height = 'auto';
        failureTimesTextarea.style.height = (failureTimesTextarea.scrollHeight) + 'px';

        // Restablecer resultados
        document.getElementById("beta").textContent = '-';
        document.getElementById("eta").textContent = '-';
        document.getElementById("mttf").textContent = '-';
        document.getElementById("predictionResult").style.display = 'none';
        document.getElementById("addBtn").disabled = true;

        // Restaurar gráfico vacío
        if (chart) chart.destroy();
        initializeEmptyChart();

        // Remover clase de resultados visibles
        document.getElementById('results').classList.remove('results-visible');

        // Limpiar resultados agregados
        aggregatedResultsData = [];
        calculationCounter = 1;
        document.getElementById('aggregatedResultsContainer').innerHTML = '';

        // Volver a la calculadora
        switchWizardTab('tab-tool');

        // Mostrar notificación
        showNotification('Data has been reset. You can enter new failure times.');
      });
    });

    // Función para mostrar notificaciones
    function showNotification(message) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: var(--success-color);
        color: white;
        padding: 15px 20px;
        border-radius: 5px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 1000;
        animation: slideIn 0.3s ease;
        max-width: 300px;
        font-weight: 600;
      `;

      // Animación CSS
      const style = document.createElement('style');
      style.textContent = `
        @keyframes slideIn {
          from { transform: translateX(100%); opacity: 0; }
          to { transform: translateX(0); opacity: 1; }
        }
        @keyframes fadeOut {
          from { opacity: 1; }
          to { opacity: 0; }
        }
      `;
      document.head.appendChild(style);

      notification.textContent = message;
      document.body.appendChild(notification);

      // Remover después de 3 segundos
      setTimeout(() => {
        notification.style.animation = 'fadeOut 0.5s ease';
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 500);
      }, 3000);
    }

    document.getElementById("weibullForm").addEventListener("submit", function (event) {
      event.preventDefault();
      calculateWeibull();
    });

    function calculateWeibull() {
      const failureTimesInput = document.getElementById("failureTimes").value;
      const failureTimes = failureTimesInput.split(",").map(v => parseFloat(v.trim())).filter(v => !isNaN(v) && v > 0).sort((a, b) => a - b);

      const n = failureTimes.length;

      if (n < 2) {
        alert("⚠️ You must enter at least 2 valid, positive failure times.");
        return;
      }

      // Prepare data for linear regression
      const points = failureTimes.map((time, index) => {
        const rank = index + 1;
        const medianRank = (rank - 0.5) / n;
        const x = Math.log(time);
        const y = Math.log(Math.log(1 / (1 - medianRank)));
        return { x, y, time };
      });

      // Linear regression: y = m*x + c
      let sumX = 0, sumY = 0, sumXY = 0, sumX2 = 0;
      points.forEach(p => {
        sumX += p.x;
        sumY += p.y;
        sumX2 += p.x * p.x;
      });
      // Cálculo correcto de sum(x*y)
      sumXY = points.reduce((acc, p) => acc + p.x * p.y, 0);

      const m = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX); // Slope
      const c = (sumY - m * sumX) / n; // Intercept

      const beta = m;
      const eta = Math.exp(-c / m);

      // Calculate MTTF
      const mttf = eta * gamma(1 + 1 / beta);

      document.getElementById("beta").textContent = beta.toFixed(4);
      document.getElementById("eta").textContent = eta.toFixed(2);
      document.getElementById("mttf").textContent = mttf.toFixed(2);

      // Handle optional prediction
      const predictTimeInput = document.getElementById("predictTime").value;
      const predictTime = parseFloat(predictTimeInput);
      const predictionResultEl = document.getElementById("predictionResult");

      if (!isNaN(predictTime) && predictTime > 0) {
        const prob = (1 - Math.exp(-Math.pow(predictTime / eta, beta))) * 100;
        document.getElementById("timeForPrediction").textContent = predictTime;
        document.getElementById("failureProbability").textContent = prob.toFixed(2);
        predictionResultEl.style.display = "block";
      } else {
        predictionResultEl.style.display = "none";
      }

      // Mostrar resultados
      document.getElementById("addBtn").disabled = false;
      document.getElementById('results').classList.add('results-visible');

      lastResult = {
        id: calculationCounter,
        timestamp: new Date().toLocaleString(),
        failureTimes: failureTimesInput,
        beta: beta,
        eta: eta,
        mttf: mttf
      };

      // Cambiar a la pestaña de resultados y hacer scroll
      switchWizardTab('tab-results');

      // Dibujar gráfico (se debe hacer después de cambiar de tab para que el canvas tenga dimensiones)
      setTimeout(() => {
        plotChart(points, m, c);
      }, 100);
    }

    function plotChart(points, slope, intercept) {
      const regressionLine = points.map(p => ({
        x: p.x,
        y: slope * p.x + intercept
      }));

      if (chart) chart.destroy();

      const ctx = document.getElementById("weibullChartCanvas").getContext("2d");
      chart = new Chart(ctx, {
        type: "scatter",
        data: {
          datasets: [
            {
              label: "Failure Data Points",
              data: points.map(p => ({ x: p.time, y: p.y })),
              backgroundColor: "#e74c3c",
              pointRadius: 5,
              pointHoverRadius: 7
            },
            {
              label: "Weibull Fit Line",
              data: regressionLine.map((p, i) => ({ x: points[i].time, y: p.y })),
              borderColor: "#3498db",
              backgroundColor: "transparent",
              type: "line",
              showLine: true,
              pointRadius: 0,
              borderWidth: 2
            }
          ]
        },
        options: {
          responsive: true, maintainAspectRatio: false,
          scales: {
            x: {
              type: "logarithmic",
              title: { display: true, text: "Time to Failure (Log Scale)" },
              grid: { color: "rgba(0, 0, 0, 0.05)" }
            },
            y: {
              type: "linear",
              title: { display: true, text: "ln(ln(1/(1-F(t))))" },
              grid: { color: "rgba(0, 0, 0, 0.05)" }
            }
          },
          plugins: {
            legend: { position: "top" },
            tooltip: {
              callbacks: {
                label: function (context) {
                  let label = context.dataset.label || '';
                  if (label) {
                    label += ': ';
                  }
                  if (context.parsed.x !== null) {
                    label += `Time = ${context.parsed.x.toFixed(2)}`;
                  }
                  return label;
                }
              }
            }
          }
        }
      });
    }

    document.getElementById("addBtn").addEventListener("click", addResultToList);
    function addResultToList() {
      if (!lastResult) return;

      aggregatedResultsData.push(lastResult);

      const container = document.getElementById('aggregatedResultsContainer');
      const card = document.createElement('div');
      card.className = 'result-card';

      card.innerHTML = `
        <div class="result-card-header">
            <img src="sigma-exacta-icon.jpg" alt="Sigma Exacta Icon" class="result-card-icon">
            <div class="result-card-title">Calculation #${lastResult.id} - ${lastResult.timestamp}</div>
        </div>
        <div class="result-card-body">
            <div class="result-card-item" style="grid-column: 1 / -1;">
                <strong>Times to Failure Data</strong>
                <div class="failure-data">${lastResult.failureTimes}</div>
            </div>
            <div class="result-card-item">
                <strong>Shape (β)</strong>
                <span>${lastResult.beta.toFixed(4)}</span>
            </div>
            <div class="result-card-item">
                <strong>Scale (η)</strong>
                <span>${lastResult.eta.toFixed(2)}</span>
            </div>
            <div class="result-card-item">
                <strong>MTTF</strong>
                <span>${lastResult.mttf.toFixed(2)}</span>
            </div>
        </div>
    `;

      container.prepend(card);

      calculationCounter++;
      document.getElementById("addBtn").disabled = true;
    }

    document.getElementById("exportBtn").addEventListener("click", exportExcel);
    function exportExcel() {
      if (aggregatedResultsData.length === 0) {
        alert("No results to export. Please add results to the list first.");
        return;
      }

      const dataForSheet = aggregatedResultsData.map(res => ({
        "Calculation #": res.id,
        "Timestamp": res.timestamp,
        "Times to Failure": res.failureTimes,
        "Shape (β)": res.beta,
        "Scale (η)": res.eta,
        "MTTF": res.mttf
      }));

      const wb = XLSX.utils.book_new();

      // Create custom headers
      const header = [
        ["SigmaExacta Weibull Analysis"],
        ["Generated on:", new Date().toLocaleString()]
      ];

      // Create worksheet from headers first
      const ws = XLSX.utils.aoa_to_sheet(header);

      // Add JSON data to the worksheet, starting below the headers
      // We use origin: 'A4' to leave a blank line (row 3) for spacing.
      XLSX.utils.sheet_add_json(ws, dataForSheet, {
        origin: "A4",
        skipHeader: false // We want the headers from the JSON object
      });

      XLSX.utils.book_append_sheet(wb, ws, "Weibull Results");
      XLSX.writeFile(wb, "Weibull_Analysis_Sigma_Exacta.xlsx");
    }

    const failureTimesTextarea = document.getElementById('failureTimes');
    failureTimesTextarea.addEventListener('input', () => {
      failureTimesTextarea.style.height = 'auto';
      failureTimesTextarea.style.height = (failureTimesTextarea.scrollHeight) + 'px';
    });

  </script>

</body>

</html>